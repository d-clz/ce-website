{"remainingRequest":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js!/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/dclz/vivexelt-admin/src/bootstrap.js","dependencies":[{"path":"/home/dclz/vivexelt-admin/src/bootstrap.js","mtime":1620325383194},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js","mtime":1620325525308},{"path":"/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js","mtime":1620142637801}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGV0ZWN0UHJvZHVjdGlvbkRldk1vZGUsIGlzTm9uUHJvZHVjdGlvbiwgc2V0RW52IH0gZnJvbSAiLi9jb3JlL2hlbHBlcnMvZW52aXJvbm1lbnQiOwppbXBvcnQgeyBzZXRFbmFibGVMb2cgfSBmcm9tICIuL2NvcmUvaGVscGVycy9sb2ciOwppbXBvcnQgRGV0ZWN0IGZyb20gIi4vY29yZS9oZWxwZXJzL2RldGVjdCI7CmltcG9ydCBSb3V0ZXIgZnJvbSAiLi9yb3V0ZXMvcm91dGVyIjsKaW1wb3J0IEJyb3dzZXIgZnJvbSAiLi9jb3JlL2hlbHBlcnMvYnJvd3NlciI7CmltcG9ydCBBdXRoU2VydmljZSBmcm9tICIuL2NvcmUvc2VydmljZXMvYXV0aCI7CmltcG9ydCBDb25maWcgZnJvbSAiLi9jb3JlL2hlbHBlcnMvY29uZmlnIjsKaW1wb3J0IEV2ZW50QnVzIGZyb20gIi4vY29yZS9oZWxwZXJzL2V2ZW50IjsKaW1wb3J0IHsgVE9LRU5fRVhQSVJFRCwgVU5BVVRIT1JJWkVEX1JFUVVFU1QgfSBmcm9tICIuL2NvcmUvY29uc3RhbnRzL2V2ZW50IjsKdmFyIEJvb3RzdHJhcCA9IHsKICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgLy8gUHJlcGFyZSBlbnYgJiBjb25maWd1cmF0aW9uCiAgICBCb290c3RyYXAuZW52KCk7CiAgICBCb290c3RyYXAuY29uZmlnKCk7IC8vIEFuYWx5dGljcyBzaG91bGQgc3RhcnQgZmlyc3QKCiAgICBCb290c3RyYXAuZXZlbnRzKCk7CiAgfSwKICBlbnY6IGZ1bmN0aW9uIGVudigpIHsKICAgIHNldEVudihwcm9jZXNzLmVudi5WVUVfQVBQX0VOVik7CiAgICBkZXRlY3RQcm9kdWN0aW9uRGV2TW9kZSgpOwogICAgc2V0RW5hYmxlTG9nKGlzTm9uUHJvZHVjdGlvbigpKTsKICB9LAoKICAvKioKICAgKiBJbml0IGNvbmZpZwogICAqLwogIGNvbmZpZzogZnVuY3Rpb24gY29uZmlnKCkgewogICAgdGhpcy5nbG9iYWxDb25maWcoKTsKICAgIHRoaXMub3RoZXJDb25maWcoKTsKICB9LAoKICAvKioKICAgKiBTZXQgZ2xvYmFsIGNvbmZpZwogICAqLwogIGdsb2JhbENvbmZpZzogZnVuY3Rpb24gZ2xvYmFsQ29uZmlnKCkgewogICAgdmFyIGNvbmZpZyA9IHsKICAgICAgZW52OiBwcm9jZXNzLmVudi5WVUVfQVBQX0VOViwKICAgICAgaXNMb2NhbFJ1bjogcHJvY2Vzcy5lbnYuVlVFX0FQUF9MT0NBTF9SVU4sCiAgICAgIGRldmljZTogRGV0ZWN0LmdldERldmljZSgpLAogICAgICBvczogRGV0ZWN0LmdldE9TKCksCiAgICAgIGJyb3dzZXI6IERldGVjdC5nZXRCcm93c2VyKCkKICAgIH07CiAgICBDb25maWcuc2V0KCdnbG9iYWwnLCBjb25maWcpOwogIH0sCiAgZXZlbnRzOiBmdW5jdGlvbiBldmVudHMoKSB7CiAgICBFdmVudEJ1cy4kb24oVU5BVVRIT1JJWkVEX1JFUVVFU1QsIGZ1bmN0aW9uICgpIHsKICAgICAgUm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdub19hY2Nlc3MnCiAgICAgIH0pOwogICAgfSk7CiAgICBFdmVudEJ1cy4kb24oVE9LRU5fRVhQSVJFRCwgZnVuY3Rpb24gKCkgewogICAgICBBdXRoU2VydmljZS5jbGVhcigpOwogICAgICB2YXIgcmVkaXJlY3RVcmwgPSBCcm93c2VyLmdldFVSTFBhcmFtZXRlcigncmV0dXJuX3VybCcpOwoKICAgICAgaWYgKCEocmVkaXJlY3RVcmwgJiYgcmVkaXJlY3RVcmwubGVuZ3RoID4gMCkpIHsKICAgICAgICByZWRpcmVjdFVybCA9IGRlY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uaHJlZik7CiAgICAgIH0KCiAgICAgIFJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnbG9nb3V0JywKICAgICAgICBxdWVyeTogewogICAgICAgICAgcmV0dXJuX3VybDogcmVkaXJlY3RVcmwsCiAgICAgICAgICB0eXBlOiAndG9rZW5fZXhwaXJlZCcKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfSwKCiAgLyoqCiAgKiBPdGhlciBjb25maWcKICAqLwogIG90aGVyQ29uZmlnOiBmdW5jdGlvbiBvdGhlckNvbmZpZygpIHsKICAgIENvbmZpZy5zZXQoJ2FwaScsIHsKICAgICAgZW5kcG9pbnQ6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUElfRU5EUE9JTlQKICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgQm9vdHN0cmFwOw=="},{"version":3,"sources":["/home/dclz/vivexelt-admin/src/bootstrap.js"],"names":["detectProductionDevMode","isNonProduction","setEnv","setEnableLog","Detect","Router","Browser","AuthService","Config","EventBus","TOKEN_EXPIRED","UNAUTHORIZED_REQUEST","Bootstrap","init","env","config","events","process","VUE_APP_ENV","globalConfig","otherConfig","isLocalRun","VUE_APP_LOCAL_RUN","device","getDevice","os","getOS","browser","getBrowser","set","$on","push","name","clear","redirectUrl","getURLParameter","length","decodeURIComponent","window","location","href","query","return_url","type","endpoint","VUE_APP_BASE_API_ENDPOINT"],"mappings":"AACA,SAASA,uBAAT,EAAkCC,eAAlC,EAAmDC,MAAnD;AACA,SAASC,YAAT;AACA,OAAOC,MAAP;AACA,OAAOC,MAAP;AACA,OAAOC,OAAP;AACA,OAAOC,WAAP;AACA,OAAOC,MAAP;AACA,OAAOC,QAAP;AACA,SACIC,aADJ,EAEIC,oBAFJ;AAKA,IAAMC,SAAS,GAAG;AACdC,EAAAA,IADc,kBACP;AACH;AACAD,IAAAA,SAAS,CAACE,GAAV;AACAF,IAAAA,SAAS,CAACG,MAAV,GAHG,CAKH;;AACAH,IAAAA,SAAS,CAACI,MAAV;AACH,GARa;AASdF,EAAAA,GATc,iBASR;AACFZ,IAAAA,MAAM,CAACe,OAAO,CAACH,GAAR,CAAYI,WAAb,CAAN;AACAlB,IAAAA,uBAAuB;AACvBG,IAAAA,YAAY,CAACF,eAAe,EAAhB,CAAZ;AACH,GAba;;AAcd;;;AAGAc,EAAAA,MAjBc,oBAiBL;AACL,SAAKI,YAAL;AACA,SAAKC,WAAL;AACH,GApBa;;AAqBd;;;AAGAD,EAAAA,YAxBc,0BAwBC;AACX,QAAMJ,MAAM,GAAG;AACXD,MAAAA,GAAG,EAAEG,OAAO,CAACH,GAAR,CAAYI,WADN;AAEXG,MAAAA,UAAU,EAAEJ,OAAO,CAACH,GAAR,CAAYQ,iBAFb;AAGXC,MAAAA,MAAM,EAAEnB,MAAM,CAACoB,SAAP,EAHG;AAIXC,MAAAA,EAAE,EAAErB,MAAM,CAACsB,KAAP,EAJO;AAKXC,MAAAA,OAAO,EAAEvB,MAAM,CAACwB,UAAP;AALE,KAAf;AAQApB,IAAAA,MAAM,CAACqB,GAAP,CAAW,QAAX,EAAqBd,MAArB;AACH,GAlCa;AAmCdC,EAAAA,MAnCc,oBAmCL;AACLP,IAAAA,QAAQ,CAACqB,GAAT,CAAanB,oBAAb,EAAmC,YAAM;AACrCN,MAAAA,MAAM,CAAC0B,IAAP,CAAY;AACRC,QAAAA,IAAI,EAAE;AADE,OAAZ;AAGH,KAJD;AAMAvB,IAAAA,QAAQ,CAACqB,GAAT,CAAapB,aAAb,EAA4B,YAAM;AAC9BH,MAAAA,WAAW,CAAC0B,KAAZ;AACA,UAAIC,WAAW,GAAG5B,OAAO,CAAC6B,eAAR,CAAwB,YAAxB,CAAlB;;AACA,UAAI,EAAED,WAAW,IAAIA,WAAW,CAACE,MAAZ,GAAqB,CAAtC,CAAJ,EAA8C;AAC1CF,QAAAA,WAAW,GAAGG,kBAAkB,CAACC,MAAM,CAACC,QAAP,CAAgBC,IAAjB,CAAhC;AACH;;AACDnC,MAAAA,MAAM,CAAC0B,IAAP,CAAY;AACRC,QAAAA,IAAI,EAAE,QADE;AAERS,QAAAA,KAAK,EAAE;AACHC,UAAAA,UAAU,EAAER,WADT;AAEHS,UAAAA,IAAI,EAAE;AAFH;AAFC,OAAZ;AAOH,KAbD;AAcH,GAxDa;;AAyDd;;;AAGAvB,EAAAA,WA5Dc,yBA4DA;AACVZ,IAAAA,MAAM,CAACqB,GAAP,CAAW,KAAX,EAAkB;AACde,MAAAA,QAAQ,EAAE3B,OAAO,CAACH,GAAR,CAAY+B;AADR,KAAlB;AAGH;AAhEa,CAAlB;AAmEA,eAAejC,SAAf","sourcesContent":["\nimport { detectProductionDevMode, isNonProduction, setEnv } from './core/helpers/environment'\nimport { setEnableLog } from './core/helpers/log'\nimport Detect from './core/helpers/detect'\nimport Router from './routes/router'\nimport Browser from './core/helpers/browser'\nimport AuthService from './core/services/auth'\nimport Config from './core/helpers/config'\nimport EventBus from './core/helpers/event'\nimport {\n    TOKEN_EXPIRED,\n    UNAUTHORIZED_REQUEST,\n} from './core/constants/event'\n\nconst Bootstrap = {\n    init() {\n        // Prepare env & configuration\n        Bootstrap.env()\n        Bootstrap.config()\n\n        // Analytics should start first\n        Bootstrap.events()\n    },\n    env() {\n        setEnv(process.env.VUE_APP_ENV)\n        detectProductionDevMode()\n        setEnableLog(isNonProduction())\n    },\n    /**\n     * Init config\n     */\n    config() {\n        this.globalConfig()\n        this.otherConfig()\n    },\n    /**\n     * Set global config\n     */\n    globalConfig() {\n        const config = {\n            env: process.env.VUE_APP_ENV,\n            isLocalRun: process.env.VUE_APP_LOCAL_RUN,\n            device: Detect.getDevice(),\n            os: Detect.getOS(),\n            browser: Detect.getBrowser(),\n        }\n\n        Config.set('global', config)\n    },\n    events() {\n        EventBus.$on(UNAUTHORIZED_REQUEST, () => {\n            Router.push({\n                name: 'no_access',\n            })\n        })\n\n        EventBus.$on(TOKEN_EXPIRED, () => {\n            AuthService.clear()\n            let redirectUrl = Browser.getURLParameter('return_url')\n            if (!(redirectUrl && redirectUrl.length > 0)) {\n                redirectUrl = decodeURIComponent(window.location.href)\n            }\n            Router.push({\n                name: 'logout',\n                query: {\n                    return_url: redirectUrl,\n                    type: 'token_expired',\n                },\n            })\n        })\n    },\n    /**\n   * Other config\n   */\n    otherConfig() {\n        Config.set('api', {\n            endpoint: process.env.VUE_APP_BASE_API_ENDPOINT,\n        })\n    },\n}\n\nexport default Bootstrap"]}]}