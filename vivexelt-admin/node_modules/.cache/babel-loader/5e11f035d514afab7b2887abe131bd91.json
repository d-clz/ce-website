{"remainingRequest":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js!/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/dclz/vivexelt-admin/src/core/services/auth.js","dependencies":[{"path":"/home/dclz/vivexelt-admin/src/core/services/auth.js","mtime":1620325383198},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js","mtime":1620325525308},{"path":"/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js","mtime":1620142637801}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFN0b3JhZ2UgZnJvbSAiQC9jb3JlL2hlbHBlcnMvc3RvcmFnZSI7CmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdAL2NvcmUvdXRpbHMvb2JqZWN0JzsKdmFyIGtleSA9ICJhdXRoIjsKdmFyIEF1dGhTZXJ2aWNlID0gewogIHVzZXI6IHt9LAogIGdldFN0b3JhZ2U6IGZ1bmN0aW9uIGdldFN0b3JhZ2UoKSB7CiAgICByZXR1cm4gU3RvcmFnZS5nZXREZWNvZGluZyhrZXksIHt9KTsKICB9LAoKICAvKioKICAqIEluaXQKICAqLwogIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICB2YXIgdXNlciA9IHRoaXMuZ2V0U3RvcmFnZSgpOwoKICAgIGlmICh1c2VyICYmICFpc0VtcHR5KHVzZXIpKSB7CiAgICAgIHRoaXMuc2V0KHVzZXIsIGZhbHNlKTsKICAgIH0KICB9LAoKICAvKioKICAgKiBTZXQKICAgKiBAcGFyYW0gdXNlcgogICAqIEBwYXJhbSBzdG9yYWdlCiAgICovCiAgc2V0OiBmdW5jdGlvbiBzZXQodXNlcikgewogICAgdmFyIHN0b3JhZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICB0aGlzLnVzZXIgPSB1c2VyIHx8IHt9OwoKICAgIGlmICh0aGlzLnVzZXIuaWQpIHsvLyBFdmVudEJ1cy4kZW1pdChBVVRIT1JJWkVELCB1c2VyKTsKICAgIH0KCiAgICBpZiAoc3RvcmFnZSkgewogICAgICB0aGlzLnN0b3JhZ2UodXNlcik7CiAgICB9CiAgfSwKICBzdG9yYWdlOiBmdW5jdGlvbiBzdG9yYWdlKGRhdGEpIHsKICAgIFN0b3JhZ2Uuc2V0RW5jb2Rpbmcoa2V5LCBkYXRhKTsKICB9LAoKICAvKioKICAgKiBHZXQgaWQKICAgKiBAcmV0dXJucyB7bnVtYmVyfQogICAqLwogIGdldElkOiBmdW5jdGlvbiBnZXRJZCgpIHsKICAgIHJldHVybiBwYXJzZUludCh0aGlzLnVzZXIuaWQsIDEwKSB8fCAwOwogIH0sCgogIC8qKgogICAqIEdldCBlbWFpbAogICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICovCiAgZ2V0RW1haWw6IGZ1bmN0aW9uIGdldEVtYWlsKCkgewogICAgcmV0dXJuIHRoaXMudXNlci5lbWFpbDsKICB9LAoKICAvKioKICAgKiBHZXQgYWNjZXNzIHRva2VuCiAgICogQHJldHVybnMge3N0cmluZ30KICAgKi8KICBnZXRBY2Nlc3NUb2tlbjogZnVuY3Rpb24gZ2V0QWNjZXNzVG9rZW4oKSB7CiAgICByZXR1cm4gdGhpcy51c2VyLmFjY2Vzc1Rva2VuOwogIH0sCgogIC8qKgogICAqIElzIGF1dGhlbnRpY2F0ZWQKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0KICAgKi8KICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpIHsKICAgIHJldHVybiB0aGlzLnVzZXIuYWNjZXNzVG9rZW4gPyB0cnVlIDogZmFsc2U7CiAgfSwKCiAgLyoqCiAgICogQ2xlYXIgdXNlciBpbiBzdG9yYWdlCiAgICovCiAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgU3RvcmFnZS5yZW1vdmUoa2V5KTsKICB9Cn07CmV4cG9ydCB2YXIgZ2V0VXNlcklkID0gZnVuY3Rpb24gZ2V0VXNlcklkKCkgewogIHJldHVybiBBdXRoU2VydmljZS5nZXRJZCgpOwp9OwpleHBvcnQgZGVmYXVsdCBBdXRoU2VydmljZTs="},{"version":3,"sources":["/home/dclz/vivexelt-admin/src/core/services/auth.js"],"names":["Storage","isEmpty","key","AuthService","user","getStorage","getDecoding","init","set","storage","id","data","setEncoding","getId","parseInt","getEmail","email","getAccessToken","accessToken","isAuthenticated","clear","remove","getUserId"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,wBAApB;AACA,SAASC,OAAT,QAAwB,qBAAxB;AAEA,IAAMC,GAAG,GAAG,MAAZ;AACA,IAAMC,WAAW,GAAG;AAClBC,EAAAA,IAAI,EAAE,EADY;AAElBC,EAAAA,UAFkB,wBAEL;AACX,WAAOL,OAAO,CAACM,WAAR,CAAoBJ,GAApB,EAAyB,EAAzB,CAAP;AACD,GAJiB;;AAMlB;;;AAGAK,EAAAA,IATkB,kBASX;AACL,QAAMH,IAAI,GAAG,KAAKC,UAAL,EAAb;;AAEA,QAAID,IAAI,IAAI,CAACH,OAAO,CAACG,IAAD,CAApB,EAA4B;AAC1B,WAAKI,GAAL,CAASJ,IAAT,EAAe,KAAf;AACD;AACF,GAfiB;;AAiBlB;;;;;AAKAI,EAAAA,GAtBkB,eAsBdJ,IAtBc,EAsBQ;AAAA,QAAhBK,OAAgB,uEAAN,IAAM;AACxB,SAAKL,IAAL,GAAYA,IAAI,IAAI,EAApB;;AACA,QAAI,KAAKA,IAAL,CAAUM,EAAd,EAAkB,CAChB;AACD;;AACD,QAAID,OAAJ,EAAa;AACX,WAAKA,OAAL,CAAaL,IAAb;AACD;AACF,GA9BiB;AAgClBK,EAAAA,OAhCkB,mBAgCVE,IAhCU,EAgCJ;AACZX,IAAAA,OAAO,CAACY,WAAR,CAAoBV,GAApB,EAAyBS,IAAzB;AACD,GAlCiB;;AAoClB;;;;AAIAE,EAAAA,KAxCkB,mBAwCV;AACN,WAAOC,QAAQ,CAAC,KAAKV,IAAL,CAAUM,EAAX,EAAe,EAAf,CAAR,IAA8B,CAArC;AACD,GA1CiB;;AA4ClB;;;;AAIAK,EAAAA,QAhDkB,sBAgDP;AACT,WAAO,KAAKX,IAAL,CAAUY,KAAjB;AACD,GAlDiB;;AAoDlB;;;;AAIAC,EAAAA,cAxDkB,4BAwDD;AACf,WAAO,KAAKb,IAAL,CAAUc,WAAjB;AACD,GA1DiB;;AA4DlB;;;;AAIAC,EAAAA,eAhEkB,6BAgEA;AAChB,WAAO,KAAKf,IAAL,CAAUc,WAAV,GAAwB,IAAxB,GAA+B,KAAtC;AACD,GAlEiB;;AAoElB;;;AAGAE,EAAAA,KAvEkB,mBAuEV;AACNpB,IAAAA,OAAO,CAACqB,MAAR,CAAenB,GAAf;AACD;AAzEiB,CAApB;AA4EA,OAAO,IAAMoB,SAAS,GAAG,SAAZA,SAAY;AAAA,SAAMnB,WAAW,CAACU,KAAZ,EAAN;AAAA,CAAlB;AAEP,eAAeV,WAAf","sourcesContent":["import Storage from \"@/core/helpers/storage\"\nimport { isEmpty } from '@/core/utils/object'\n\nconst key = \"auth\"\nconst AuthService = {\n  user: {},\n  getStorage() {\n    return Storage.getDecoding(key, {})\n  },\n\n  /**\n * Init\n */\n  init() {\n    const user = this.getStorage()\n\n    if (user && !isEmpty(user)) {\n      this.set(user, false)\n    }\n  },\n\n  /**\n   * Set\n   * @param user\n   * @param storage\n   */\n  set(user, storage = true) {\n    this.user = user || {}\n    if (this.user.id) {\n      // EventBus.$emit(AUTHORIZED, user);\n    }\n    if (storage) {\n      this.storage(user)\n    }\n  },\n\n  storage(data) {\n    Storage.setEncoding(key, data)\n  },\n\n  /**\n   * Get id\n   * @returns {number}\n   */\n  getId() {\n    return parseInt(this.user.id, 10) || 0\n  },\n\n  /**\n   * Get email\n   * @returns {string}\n   */\n  getEmail() {\n    return this.user.email\n  },\n\n  /**\n   * Get access token\n   * @returns {string}\n   */\n  getAccessToken() {\n    return this.user.accessToken\n  },\n\n  /**\n   * Is authenticated\n   * @returns {boolean}\n   */\n  isAuthenticated() {\n    return this.user.accessToken ? true : false\n  },\n\n  /**\n   * Clear user in storage\n   */\n  clear() {\n    Storage.remove(key)\n  },\n}\n\nexport const getUserId = () => AuthService.getId()\n\nexport default AuthService\n"]}]}