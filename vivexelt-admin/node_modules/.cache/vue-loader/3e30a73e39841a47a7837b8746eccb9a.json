{"remainingRequest":"/home/dclz/vivexelt-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dclz/vivexelt-admin/src/views/Jobs/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dclz/vivexelt-admin/src/views/Jobs/List.vue","mtime":1620438743778},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js","mtime":1620325525308},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/vue-loader/lib/index.js","mtime":1620325533304}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKaW1wb3J0IExpZ2h0VGFibGUgZnJvbSAnLi4vVGFibGVzL1JlZ3VsYXJUYWJsZXMvTGlnaHRUYWJsZScKaW1wb3J0IHsgSFRUUCB9IGZyb20gJ0AvY29yZS9odHRwLWNvbW1vbicKaW1wb3J0IGpvYlNlcnZpY2UgZnJvbSAnQC9hcGkvam9iU2VydmljZScKaW1wb3J0IGNvdW50cnlTZXJ2aWNlIGZyb20gJ0AvYXBpL2NvdW50cnlTZXJ2aWNlJwppbXBvcnQgcG9zdFNlcnZpY2UgZnJvbSAnQC9hcGkvcG9zdFNlcnZpY2UnCmltcG9ydCB7IFRhYmxlLCBUYWJsZUNvbHVtbiB9IGZyb20gJ2VsZW1lbnQtdWknCmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnCmltcG9ydCB7CiAgTWFwTWluaW11bURlZ3JlZSwKICBNYXBKb2JUeXBlLAogIE1hcEpvYlN0YXR1cywKICBKb2JTdGF0dXMsCiAgTWluaW11bURlZ3JlZSwKICBKb2JUeXBlLAp9IGZyb20gJy4vY29uc3RhbnQvY29uc3RhbnQnCmltcG9ydCB7IGpzb24gfSBmcm9tICdkMycKLy9pbXBvcnQgRHBteFNlbGVjdCBmcm9tICJAL2NvbXBvbmVudHMvRHBteFNlbGVjdCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgW1RhYmxlLm5hbWVdOiBUYWJsZSwKICAgIFtUYWJsZUNvbHVtbi5uYW1lXTogVGFibGVDb2x1bW4sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsdGVyOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgbWluX2RlZ3JlZTogdW5kZWZpbmVkLAogICAgICAgIGRlcGFydG1lbnRzOiBbXSwKICAgICAgICBmb3NlczogW10sCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQsCiAgICAgICAgY291bnRyaWVzX2NvZGU6IFtdLAogICAgICAgIHR5cGU6IHVuZGVmaW5lZCwKICAgICAgfSwKICAgICAgcGFnZTogMSwKICAgICAgam9iczogW10sCiAgICAgIGRlcGFydG1lbnRzOiBbXSwKICAgICAgZmllbGRPZlN0dWRpZXM6IFtdLAogICAgICBjb3VudHJpZXM6IFtdLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICB0b3RhbEpvYnM6IDAsCiAgICAgIG9wZW5pbmdKb2JzOiAwLAogICAgICBzb29uSm9iczogMCwKICAgICAgY2xvc2VkSm9iczogMCwKICAgICAgam9iU2VsZWN0ZWQ6IFtdLAogICAgICBjb25maXJtTW9kYWw6IHsKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBtZXNzYWdlOiAnJywKICAgICAgfSwKICAgICAgZGVsZXRlTW9kZTogJycsCiAgICAgIGVudGl0eUlkOiAwLAogICAgICB2aXNpYmxlQnVsa0FjdGlvbjogZmFsc2UsCiAgICAgIGZpcnN0VGltZTogdHJ1ZSwKICAgICAgcG9zdHM6IFtdLAogICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUElfRU5EUE9JTlQgKyAnL3B1YmxpYy9pbWFnZS8nLAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIC4uLm1hcFN0YXRlKCJwcm9kdWN0cyIsIHsKICAgIC8vICAgYWxsOiBzdGF0ZSA9PiBzdGF0ZS5hbGwKICAgIC8vIH0pLAogICAgLy8gLi4ubWFwU3RhdGUoImpvYnMiLCB7CiAgICAvLyAgIGpvYnM6IHN0YXRlID0+IHN0YXRlLmFsbAogICAgLy8gfSkKICAgIGdldEpvYlN0YXR1cygpIHsKICAgICAgcmV0dXJuIEpvYlN0YXR1cy5tYXAoKHMpID0+IHsKICAgICAgICBsZXQgbmFtZSA9IE1hcEpvYlN0YXR1cygpLmdldChzKSB8fCBzCiAgICAgICAgcmV0dXJuIHsgbmFtZTogbmFtZSwgdmFsdWU6IHMgfQogICAgICB9KQogICAgfSwKICAgIGdldE1pbmltdW1EZWdyZWVzKCkgewogICAgICByZXR1cm4gTWluaW11bURlZ3JlZS5tYXAoKHMpID0+IHsKICAgICAgICBsZXQgbmFtZSA9IE1hcE1pbmltdW1EZWdyZWUoKS5nZXQocykgfHwgcwogICAgICAgIHJldHVybiB7IG5hbWU6IG5hbWUsIHZhbHVlOiBzIH0KICAgICAgfSkKICAgIH0sCiAgICBnZXRKb2JUeXBlcygpIHsKICAgICAgcmV0dXJuIEpvYlR5cGUubWFwKChzKSA9PiB7CiAgICAgICAgbGV0IG5hbWUgPSBNYXBKb2JUeXBlKCkuZ2V0KHMpIHx8IHMKICAgICAgICByZXR1cm4geyBuYW1lOiBuYW1lLCB2YWx1ZTogcyB9CiAgICAgIH0pCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgaW5pdCgpIHsKICAgICAgcG9zdFNlcnZpY2UuZ2V0QWxsUG9zdCh0aGlzLmZpbHRlci5wYWdlLCB0aGlzLmZpbHRlci5saW1pdCkudGhlbigoZGF0YSkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpCiAgICAgICAgaWYgKCFkYXRhLnN1Y2Nlc3MpIHJldHVybgogICAgICAgIHRoaXMucG9zdHMgPSBkYXRhLnBvc3RzCiAgICAgICAgdGhpcy50b3RhbEpvYnMgPSBkYXRhLnRvdGFsCiAgICAgIH0pCiAgICB9LAogICAgYXN5bmMgZmlsdGVySm9icygpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlCiAgICAgIGF3YWl0IHRoaXMuZ2V0Sm9iV2l0aEZpbHRlcigpCiAgICAgIGF3YWl0IHRoaXMuY291bnRKb2IoKQogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICB9LAogICAgZGVib3VuY2VGZXRjaFZpZGVvczogZGVib3VuY2UoCiAgICAgIGFzeW5jIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmluaXQoKQogICAgICB9LAogICAgICA1MDAsCiAgICAgIHsKICAgICAgICBsZWFkaW5nOiB0cnVlLAogICAgICAgIHRyYWlsaW5nOiB0cnVlLAogICAgICB9CiAgICApLAogICAgY2hhbmdlUGFnZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2codmFsKQogICAgICB0aGlzLmZpbHRlci5wYWdlID0gdmFsCiAgICB9LAogICAgYnVpbGRQYXJhbXNGb3JGaWx0ZXIoKSB7CiAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgcGFnZTogdGhpcy5maWx0ZXIucGFnZSwKICAgICAgICBuYW1lOiB0aGlzLmZpbHRlci5uYW1lLAogICAgICAgIGxpbWl0OiB0aGlzLmZpbHRlci5saW1pdCwKICAgICAgICBmaWVsZHM6ICdpZCxjb3VudHJ5X2NvZGUsaWQsaW1hZ2VfdXJsLGluZHVzdHJ5LG1pbl9kZWdyZWUsbmFtZSxvcGVuX2F0LGNsb3NlX2F0LHR5cGUnLAogICAgICB9CiAgICAgIGlmICh0aGlzLmZpbHRlci5mb3NlcyAmJiB0aGlzLmZpbHRlci5mb3Nlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgcGFyYW1zLmZvc19pZHMgPSB0aGlzLmJ1aWxkUGFyYW1zRm9yQXJyYXkodGhpcy5maWx0ZXIuZm9zZXMsICdpZCcpCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZmlsdGVyLmRlcGFydG1lbnRzKSB7CiAgICAgICAgcGFyYW1zLmRlcGFydG1lbnRfaWRzID0gdGhpcy5idWlsZFBhcmFtc0ZvckFycmF5KHRoaXMuZmlsdGVyLmRlcGFydG1lbnRzLCAnaWQnKQogICAgICB9CiAgICAgIGlmICh0aGlzLmZpbHRlci5jb3VudHJpZXNfY29kZSkgewogICAgICAgIHBhcmFtcy5jb3VudHJpZXNfY29kZSA9IHRoaXMuYnVpbGRQYXJhbXNGb3JBcnJheSh0aGlzLmZpbHRlci5jb3VudHJpZXNfY29kZSwgJ2NvZGUnKQogICAgICB9CiAgICAgIGlmICh0aGlzLmZpbHRlci5zdGF0dXMpIHsKICAgICAgICBwYXJhbXMuc3RhdHVzID0gdGhpcy5maWx0ZXIuc3RhdHVzLnZhbHVlCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZmlsdGVyLm1pbl9kZWdyZWUpIHsKICAgICAgICBwYXJhbXMubWluX2RlZ3JlZSA9IHRoaXMuZmlsdGVyLm1pbl9kZWdyZWUudmFsdWUKICAgICAgfQogICAgICBpZiAodGhpcy5maWx0ZXIudHlwZSkgewogICAgICAgIHBhcmFtcy50eXBlID0gdGhpcy5maWx0ZXIudHlwZS52YWx1ZQogICAgICB9CgogICAgICByZXR1cm4gcGFyYW1zCiAgICB9LAogICAgYnVpbGRQYXJhbXNGb3JBcnJheShhcnJheSwga2V5KSB7CiAgICAgIGxldCByZXMgPSBbXQogICAgICBhcnJheS5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgcmVzLnB1c2goZVtrZXldKQogICAgICB9KQogICAgICByZXR1cm4gcmVzLmpvaW4oJywnKQogICAgfSwKICAgIGFzeW5jIGdldEpvYldpdGhGaWx0ZXIoKSB7CiAgICAgIGxldCBqb2JSZXMgPSBhd2FpdCBqb2JTZXJ2aWNlLmdldEpvYnModGhpcy5idWlsZFBhcmFtc0ZvckZpbHRlcigpKQogICAgICBpZiAoIWpvYlJlcyB8fCAham9iUmVzLnN1Y2Nlc3MpIHsKICAgICAgICAvLyB0b2FzdAogICAgICB9CiAgICAgIGlmIChqb2JSZXMuam9icykgewogICAgICAgIHRoaXMuam9icyA9IGpvYlJlcy5qb2JzCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBnZXRBbGxGb3NBbmREZXBhcnRtZW50KCkgewogICAgICBsZXQgcmVzID0gYXdhaXQgam9iU2VydmljZS5nZXRGb3NBbmREZXBhcnRtZW50KCkKICAgICAgaWYgKCFyZXMgfHwgIXJlcy5zdWNjZXNzKSB7CiAgICAgICAgLy8gdG9hc3QKICAgICAgfQogICAgICBpZiAocmVzLmRlcGFydG1lbnRzKSB7CiAgICAgICAgdGhpcy5kZXBhcnRtZW50cyA9IHJlcy5kZXBhcnRtZW50cwogICAgICB9CiAgICAgIGlmIChyZXMuZmllbGRfb2Zfc3R1ZGllcykgewogICAgICAgIHRoaXMuZmllbGRPZlN0dWRpZXMgPSByZXMuZmllbGRfb2Zfc3R1ZGllcwogICAgICB9CiAgICB9LAogICAgYXN5bmMgY291bnRKb2IoKSB7CiAgICAgIGxldCBwYXJhbXMgPSB0aGlzLmJ1aWxkUGFyYW1zRm9yRmlsdGVyKCkKICAgICAgaWYgKHRoaXMuZmlyc3RUaW1lKSB7CiAgICAgICAgcGFyYW1zLndpdGhfc3RhdGlzdGljID0gdHJ1ZQogICAgICAgIHRoaXMuZmlyc3RUaW1lID0gZmFsc2UKICAgICAgfQogICAgICBsZXQgcmVzID0gYXdhaXQgam9iU2VydmljZS5jb3VudEpvYnMocGFyYW1zKQogICAgICBpZiAoIXJlcyB8fCAhcmVzLnN1Y2Nlc3MpIHsKICAgICAgICAvLyB0b2FzdAogICAgICB9CiAgICAgIHRoaXMudG90YWxKb2JzID0gcmVzLmNvdW50IHx8IDAKICAgICAgdGhpcy5zb29uSm9icyA9IHJlcy5jb3VudF9zb29uIHx8IDAKICAgICAgdGhpcy5vcGVuaW5nSm9icyA9IHJlcy5jb3VudF9hdmFpbGFibGUgfHwgMAogICAgICB0aGlzLmNsb3NlZEpvYnMgPSB0aGlzLnRvdGFsSm9icyAtIHRoaXMuc29vbkpvYnMgLSB0aGlzLm9wZW5pbmdKb2JzCiAgICB9LAogICAgYXN5bmMgZ2V0QWxsQ291bnRyaWVzKCkgewogICAgICBsZXQgcmVzID0gYXdhaXQgY291bnRyeVNlcnZpY2UuZ2V0QWxsQ291bnRyeSgpCiAgICAgIGlmICghcmVzIHx8ICFyZXMuY291bnRyaWVzKSB7CiAgICAgICAgLy8gdG9hc3QKICAgICAgfQogICAgICB0aGlzLmNvdW50cmllcyA9IHJlcy5jb3VudHJpZXMKICAgIH0sCiAgICBzZWxlY3Rpb25DaGFuZ2VkKHNlbGVjdGlvbikgewogICAgICB0aGlzLmpvYlNlbGVjdGVkID0gc2VsZWN0aW9uCiAgICB9LAoKICAgIHRvZ2dsZUNvbmZpcm1Nb2RhbChpc011bHRpcGxlLCBpZCkgewogICAgICB0aGlzLmRlbGV0ZU1vZGUgPSBpc011bHRpcGxlID09PSB0cnVlID8gJ211bHRpcGxlJyA6ICdzaW5nbGUnCiAgICAgIGlmIChpZCkgewogICAgICAgIHRoaXMuZW50aXR5SWQgPSBpZAogICAgICB9CiAgICAgIHRoaXMuY29uZmlybU1vZGFsLnNob3cgPSB0cnVlCiAgICAgIGlmICh0aGlzLmRlbGV0ZU1vZGUgPT09ICdzaW5nbGUnKSB7CiAgICAgICAgdGhpcy5jb25maXJtTW9kYWwubWVzc2FnZSA9IGBEZWxldGUgdGhpcyBqb2I/YAogICAgICB9IGVsc2UgewogICAgICAgIGxldCBsZW5ndGggPSB0aGlzLmpvYlNlbGVjdGVkLmxlbmd0aAogICAgICAgIGxldCB0b3RhbCA9IHRoaXMucG9zdHMubGVuZ3RoCiAgICAgICAgdGhpcy5jb25maXJtTW9kYWwubWVzc2FnZSA9IGBEZWxldGUgJHtsZW5ndGh9IG91dCBvZiAke3RvdGFsfT9gCiAgICAgIH0KICAgIH0sCiAgICBjbG9zZUNvbmZpcm1Nb2RhbCgpIHsKICAgICAgdGhpcy5jb25maXJtTW9kYWwuc2hvdyA9IGZhbHNlCiAgICAgIHRoaXMuY29uZmlybU1vZGFsLm1lc3NhZ2UgPSAnJwogICAgICB0aGlzLmVudGl0eUlkID0gMAogICAgfSwKCiAgICBnZXRKb2JTdGF0dXNUeXBlKHN0YXJ0LCBlbmQpIHsKICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMAogICAgICBpZiAoc3RhcnQgPD0gbm93ICYmIG5vdyA8IGVuZCkgewogICAgICAgIHJldHVybiAnc3VjY2VzcycKICAgICAgfSBlbHNlIGlmIChub3cgPiBlbmQpIHsKICAgICAgICByZXR1cm4gJ3dhcm5pbmcnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICdpbmZvJwogICAgICB9CiAgICB9LAogICAgZ2V0Sm9iU3RhdHVzRGlzcGxheShzdGFydCwgZW5kKSB7CiAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAKICAgICAgaWYgKHN0YXJ0IDw9IG5vdyAmJiBub3cgPCBlbmQpIHsKICAgICAgICByZXR1cm4gJ09wZW5pbmcnCiAgICAgIH0gZWxzZSBpZiAobm93ID4gZW5kKSB7CiAgICAgICAgcmV0dXJuICdDbG9zZWQnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICdTY2hlZHVsaW5nJwogICAgICB9CiAgICB9LAogICAgZ2V0TWluRGVncmVlRGlzcGxheShkZWdyZWUpIHsKICAgICAgcmV0dXJuIE1hcE1pbmltdW1EZWdyZWUoKS5nZXQoZGVncmVlKSB8fCBkZWdyZWUKICAgIH0sCiAgICBnZXRKb2JUeXBlRGlzcGxheSh0eXBlKSB7CiAgICAgIHJldHVybiBNYXBKb2JUeXBlKCkuZ2V0KHR5cGUpIHx8IHR5cGUKICAgIH0sCiAgICBnZXRKb2JUeXBlRGlzcGxheUNsYXNzKHR5cGUpIHsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAnZ3JhZHVhdGVkJzoKICAgICAgICAgIHJldHVybiAnc3VjY2VzcycKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICdpbmZvJwogICAgICB9CiAgICAgIHJldHVybgogICAgfSwKICAgIGFzeW5jIGRvRGVsZXRlKCkgewogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWUKICAgICAgbGV0IHJlcyA9IHt9CiAgICAgIGxldCBpZHMgPSBbXQogICAgICBpZiAodGhpcy5kZWxldGVNb2RlID09PSAnc2luZ2xlJykgewogICAgICAgIHJlcyA9IGF3YWl0IHBvc3RTZXJ2aWNlLmRlbGV0ZVBvc3RCeUlkKHRoaXMuZW50aXR5SWQpCiAgICAgICAgaWYgKCFyZXMgfHwgIXJlcy5zdWNjZXNzIHx8IHJlcy5lcnJvcl9tZXNzYWdlKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiAnYm90dG9tJywKICAgICAgICAgICAgaG9yaXpvbnRhbEFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5lcnJvcl9tZXNzYWdlIHx8ICdTb21ldGhpbmcgd2VudCB3cm9uZycsCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiAnYm90dG9tJywKICAgICAgICAgICAgaG9yaXpvbnRhbEFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiBgRGVsZXRlIHN1Y2Nlc3NmdWxseWAsCiAgICAgICAgICB9KQoKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5qb2JTZWxlY3RlZC5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICBwb3N0U2VydmljZS5kZWxldGVQb3N0QnlJZChlLmlkKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiAnYm90dG9tJywKICAgICAgICAgICAgICAgIGhvcml6b250YWxBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRGVsZXRlIHN1Y2Nlc3NmdWxseWAsCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbScsCiAgICAgICAgICAgICAgICBob3Jpem9udGFsQWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXMuZXJyb3JfbWVzc2FnZSB8fCAnU29tZXRoaW5nIHdlbnQgd3JvbmcnLAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfQogICAgICB0aGlzLmVudGl0eUlkID0gMAogICAgICB0aGlzLmpvYlNlbGVjdGVkID0gW10KICAgICAgYXdhaXQgdGhpcy5pbml0KCkKICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICB0aGlzLmNsb3NlQ29uZmlybU1vZGFsKCkKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCkKICB9LAogIHdhdGNoOiB7CiAgICBmaWx0ZXI6IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLmRlYm91bmNlRmV0Y2hWaWRlb3MoKQogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgfSwKICAgIGpvYlNlbGVjdGVkOiB7CiAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgaWYgKHRoaXMuam9iU2VsZWN0ZWQgJiYgdGhpcy5qb2JTZWxlY3RlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLnZpc2libGVCdWxrQWN0aW9uID0gdHJ1ZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnZpc2libGVCdWxrQWN0aW9uID0gZmFsc2UKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views/Jobs","sourcesContent":["<template>\n  <div>\n    <div v-if=\"isLoading\">\n      <base-header class=\"pb-6 pb-8 pt-5 pt-md-8 bg-gradient-blue\"> </base-header>\n      <b-container fluid class=\"mt--7\">\n        <card>\n          <dpmx-cl type=\"bullet\"></dpmx-cl>\n        </card>\n      </b-container>\n    </div>\n\n    <base-header class=\"pb-6 pb-8 pt-5 pt-md-8 bg-gradient-blue\" v-if=\"!isLoading\">\n      <b-row> </b-row>\n    </base-header>\n    <b-container fluid class=\"mt--7\" v-if=\"!isLoading\">\n      <b-row>\n        <b-col>\n          <b-card no-body>\n            <!-- Filter -->\n            <b-card-header class=\"border-0\">\n              <b-input-group class>\n                <div class=\"input-group-prepend\">\n                  <span class=\"input-group-text\">\n                    <i class=\"fas fa-search\"></i>\n                  </span>\n                </div>\n                <b-form-input placeholder=\"Search\" type=\"text\" v-model=\"filter.name\"></b-form-input>\n                <b-input-group-append>\n                  <b-button v-b-toggle.collapse-1 variant=\"info\" @click=\"debounceFetchVideos()\"\n                    >Search</b-button\n                  >\n                </b-input-group-append>\n              </b-input-group>\n              <b-collapse id=\"collapse-4\" v-model=\"visibleBulkAction\" class=\"mt-2\">\n                <span class=\"pr-15\">{{ jobSelected.length }} selected</span>\n                <b-dropdown id=\"dropdown-1\" variant=\"secondary\" text=\"Action\" class=\"m-md-2\">\n                  <b-dropdown-item @click=\"toggleConfirmModal(true)\">Delete</b-dropdown-item>\n                </b-dropdown>\n              </b-collapse>\n            </b-card-header>\n            <el-table\n              class=\"table-responsive table dpxm-table\"\n              header-row-class-name=\"thead-light\"\n              :data=\"posts\"\n              @selection-change=\"selectionChanged\"\n            >\n              <el-table-column type=\"selection\" width=\"90\"></el-table-column>\n              <el-table-column label=\"Image thumbnail\" prop=\"short_description\" min-width=\"90px\">\n                <template v-slot=\"{ row }\">\n                  <span class=\"font-16\">\n                    <img alt=\"Image placeholder\" width=\"50px\" :src=\"url + row.filename\" />\n                  </span>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"Title\" min-width=\"300px\" prop=\"name\">\n                <template v-slot=\"{ row }\">\n                  <router-link :to=\"`/post/${row.id}`\">\n                    <b-media no-body class=\"align-items-center\">\n                      <b-media-body>\n                        <span class=\"font-weight-600 name mb-0 text-sm\">\n                          {{ row.title }}\n                        </span>\n                      </b-media-body>\n                    </b-media>\n                  </router-link>\n                </template>\n              </el-table-column>\n\n              <el-table-column label=\"Link video\" min-width=\"100px\">\n                <template v-slot=\"{ row }\">\n                  <span class=\"font-16\">\n                    <a :href=\"row.link_video\">Link video</a>\n                  </span>\n                </template>\n              </el-table-column>\n\n              <el-table-column label=\"Create At\" min-width=\"150px\" prop=\"status\">\n                <template v-slot=\"{ row }\">\n                  <span>{{ new Date(row.createAt).toISOString().split('T')[0] }}</span>\n                </template>\n              </el-table-column>\n\n              <el-table-column label=\"Action\" min-width=\"130px\">\n                <template v-slot=\"{ row }\">\n                  <base-button\n                    icon\n                    type=\"danger\"\n                    class=\"btn-sm\"\n                    @click=\"toggleConfirmModal(false, row.id)\"\n                    title=\"Delete\"\n                  >\n                    <i class=\"ni ni-fat-remove\"></i>\n                  </base-button>\n                </template>\n              </el-table-column>\n            </el-table>\n\n            <b-card-footer class=\"py-4 d-flex justify-content-end\">\n              <base-pagination\n                :per-page=\"filter.limit\"\n                :total=\"totalJobs\"\n                v-on:change=\"(val) => changePage(val)\"\n              ></base-pagination>\n            </b-card-footer>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n    <!--Confirm modal-->\n    <modal :show.sync=\"confirmModal.show\">\n      <h2>{{ this.confirmModal.message }}</h2>\n\n      <template slot=\"footer\">\n        <base-button type=\"link\" class=\"ml-auto\" @click=\"closeConfirmModal\">Close</base-button>\n        <base-button type=\"danger\" @click=\"doDelete\" :disabled=\"isLoading\">Delete</base-button>\n      </template>\n    </modal>\n  </div>\n</template>\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport LightTable from '../Tables/RegularTables/LightTable'\nimport { HTTP } from '@/core/http-common'\nimport jobService from '@/api/jobService'\nimport countryService from '@/api/countryService'\nimport postService from '@/api/postService'\nimport { Table, TableColumn } from 'element-ui'\nimport debounce from 'lodash/debounce'\nimport {\n  MapMinimumDegree,\n  MapJobType,\n  MapJobStatus,\n  JobStatus,\n  MinimumDegree,\n  JobType,\n} from './constant/constant'\nimport { json } from 'd3'\n//import DpmxSelect from \"@/components/DpmxSelect\";\n\nexport default {\n  components: {\n    [Table.name]: Table,\n    [TableColumn.name]: TableColumn,\n  },\n  data() {\n    return {\n      filter: {\n        page: 1,\n        name: '',\n        limit: 50,\n        min_degree: undefined,\n        departments: [],\n        foses: [],\n        status: undefined,\n        countries_code: [],\n        type: undefined,\n      },\n      page: 1,\n      jobs: [],\n      departments: [],\n      fieldOfStudies: [],\n      countries: [],\n      isLoading: false,\n      totalJobs: 0,\n      openingJobs: 0,\n      soonJobs: 0,\n      closedJobs: 0,\n      jobSelected: [],\n      confirmModal: {\n        show: false,\n        message: '',\n      },\n      deleteMode: '',\n      entityId: 0,\n      visibleBulkAction: false,\n      firstTime: true,\n      posts: [],\n      url: process.env.VUE_APP_BASE_API_ENDPOINT + '/public/image/',\n    }\n  },\n  computed: {\n    // ...mapState(\"products\", {\n    //   all: state => state.all\n    // }),\n    // ...mapState(\"jobs\", {\n    //   jobs: state => state.all\n    // })\n    getJobStatus() {\n      return JobStatus.map((s) => {\n        let name = MapJobStatus().get(s) || s\n        return { name: name, value: s }\n      })\n    },\n    getMinimumDegrees() {\n      return MinimumDegree.map((s) => {\n        let name = MapMinimumDegree().get(s) || s\n        return { name: name, value: s }\n      })\n    },\n    getJobTypes() {\n      return JobType.map((s) => {\n        let name = MapJobType().get(s) || s\n        return { name: name, value: s }\n      })\n    },\n  },\n  methods: {\n    async init() {\n      postService.getAllPost(this.filter.page, this.filter.limit).then((data) => {\n        console.log(data)\n        if (!data.success) return\n        this.posts = data.posts\n        this.totalJobs = data.total\n      })\n    },\n    async filterJobs() {\n      this.isLoading = true\n      await this.getJobWithFilter()\n      await this.countJob()\n      this.isLoading = false\n    },\n    debounceFetchVideos: debounce(\n      async function () {\n        this.init()\n      },\n      500,\n      {\n        leading: true,\n        trailing: true,\n      }\n    ),\n    changePage(val) {\n      console.log(val)\n      this.filter.page = val\n    },\n    buildParamsForFilter() {\n      let params = {\n        page: this.filter.page,\n        name: this.filter.name,\n        limit: this.filter.limit,\n        fields: 'id,country_code,id,image_url,industry,min_degree,name,open_at,close_at,type',\n      }\n      if (this.filter.foses && this.filter.foses.length > 0) {\n        params.fos_ids = this.buildParamsForArray(this.filter.foses, 'id')\n      }\n      if (this.filter.departments) {\n        params.department_ids = this.buildParamsForArray(this.filter.departments, 'id')\n      }\n      if (this.filter.countries_code) {\n        params.countries_code = this.buildParamsForArray(this.filter.countries_code, 'code')\n      }\n      if (this.filter.status) {\n        params.status = this.filter.status.value\n      }\n      if (this.filter.min_degree) {\n        params.min_degree = this.filter.min_degree.value\n      }\n      if (this.filter.type) {\n        params.type = this.filter.type.value\n      }\n\n      return params\n    },\n    buildParamsForArray(array, key) {\n      let res = []\n      array.forEach((e) => {\n        res.push(e[key])\n      })\n      return res.join(',')\n    },\n    async getJobWithFilter() {\n      let jobRes = await jobService.getJobs(this.buildParamsForFilter())\n      if (!jobRes || !jobRes.success) {\n        // toast\n      }\n      if (jobRes.jobs) {\n        this.jobs = jobRes.jobs\n      }\n    },\n    async getAllFosAndDepartment() {\n      let res = await jobService.getFosAndDepartment()\n      if (!res || !res.success) {\n        // toast\n      }\n      if (res.departments) {\n        this.departments = res.departments\n      }\n      if (res.field_of_studies) {\n        this.fieldOfStudies = res.field_of_studies\n      }\n    },\n    async countJob() {\n      let params = this.buildParamsForFilter()\n      if (this.firstTime) {\n        params.with_statistic = true\n        this.firstTime = false\n      }\n      let res = await jobService.countJobs(params)\n      if (!res || !res.success) {\n        // toast\n      }\n      this.totalJobs = res.count || 0\n      this.soonJobs = res.count_soon || 0\n      this.openingJobs = res.count_available || 0\n      this.closedJobs = this.totalJobs - this.soonJobs - this.openingJobs\n    },\n    async getAllCountries() {\n      let res = await countryService.getAllCountry()\n      if (!res || !res.countries) {\n        // toast\n      }\n      this.countries = res.countries\n    },\n    selectionChanged(selection) {\n      this.jobSelected = selection\n    },\n\n    toggleConfirmModal(isMultiple, id) {\n      this.deleteMode = isMultiple === true ? 'multiple' : 'single'\n      if (id) {\n        this.entityId = id\n      }\n      this.confirmModal.show = true\n      if (this.deleteMode === 'single') {\n        this.confirmModal.message = `Delete this job?`\n      } else {\n        let length = this.jobSelected.length\n        let total = this.posts.length\n        this.confirmModal.message = `Delete ${length} out of ${total}?`\n      }\n    },\n    closeConfirmModal() {\n      this.confirmModal.show = false\n      this.confirmModal.message = ''\n      this.entityId = 0\n    },\n\n    getJobStatusType(start, end) {\n      let now = new Date().getTime() / 1000\n      if (start <= now && now < end) {\n        return 'success'\n      } else if (now > end) {\n        return 'warning'\n      } else {\n        return 'info'\n      }\n    },\n    getJobStatusDisplay(start, end) {\n      let now = new Date().getTime() / 1000\n      if (start <= now && now < end) {\n        return 'Opening'\n      } else if (now > end) {\n        return 'Closed'\n      } else {\n        return 'Scheduling'\n      }\n    },\n    getMinDegreeDisplay(degree) {\n      return MapMinimumDegree().get(degree) || degree\n    },\n    getJobTypeDisplay(type) {\n      return MapJobType().get(type) || type\n    },\n    getJobTypeDisplayClass(type) {\n      switch (type) {\n        case 'graduated':\n          return 'success'\n        default:\n          return 'info'\n      }\n      return\n    },\n    async doDelete() {\n      this.isLoading = true\n      let res = {}\n      let ids = []\n      if (this.deleteMode === 'single') {\n        res = await postService.deletePostById(this.entityId)\n        if (!res || !res.success || res.error_message) {\n          this.$notify({\n            verticalAlign: 'bottom',\n            horizontalAlign: 'center',\n            type: 'danger',\n            message: res.error_message || 'Something went wrong',\n          })\n        } else {\n          this.$notify({\n            verticalAlign: 'bottom',\n            horizontalAlign: 'center',\n            type: 'success',\n            message: `Delete successfully`,\n          })\n\n        }\n      } else {\n        this.jobSelected.forEach((e) => {\n          postService.deletePostById(e.id).then((res) => {\n            if (res && res.success) {\n              this.$notify({\n                verticalAlign: 'bottom',\n                horizontalAlign: 'center',\n                type: 'success',\n                message: `Delete successfully`,\n              })\n            } else {\n              this.$notify({\n                verticalAlign: 'bottom',\n                horizontalAlign: 'center',\n                type: 'danger',\n                message: res.error_message || 'Something went wrong',\n              })\n            }\n          })\n        })\n      }\n      this.entityId = 0\n      this.jobSelected = []\n      await this.init()\n      this.isLoading = false\n      this.closeConfirmModal()\n    },\n  },\n  mounted() {\n    this.init()\n  },\n  watch: {\n    filter: {\n      handler(val) {\n        this.debounceFetchVideos()\n      },\n      deep: true,\n    },\n    jobSelected: {\n      handler() {\n        if (this.jobSelected && this.jobSelected.length > 0) {\n          this.visibleBulkAction = true\n        } else {\n          this.visibleBulkAction = false\n        }\n      },\n      deep: true,\n    },\n  },\n}\n</script>\n"]}]}