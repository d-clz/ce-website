{"remainingRequest":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js!/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/dclz/vivexelt-admin/src/core/helpers/storage.js","dependencies":[{"path":"/home/dclz/vivexelt-admin/src/core/helpers/storage.js","mtime":1620325383198},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js","mtime":1620325525308},{"path":"/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js","mtime":1620142637801}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IExvY2FsU3RvcmFnZSBmcm9tICIuLi9oZWxwZXJzL2xvY2FsU3RvcmFnZSI7CmltcG9ydCBDb29raWUgZnJvbSAiQC9jb3JlL2hlbHBlcnMvY29va2llIjsKaW1wb3J0IEJyb3dzZXIgZnJvbSAiQC9jb3JlL2hlbHBlcnMvYnJvd3NlciI7CmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnQC9jb3JlL3V0aWxzL3R5cGUnOwppbXBvcnQgeyBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSB9IGZyb20gJ0AvY29yZS91dGlscy9oYXNoJzsKaW1wb3J0IHsgcGFyc2VUb0pzb24gfSBmcm9tICdAL2NvcmUvdXRpbHMvcGFyc2UnOwp2YXIgc3RvcmUgPSBCcm93c2VyLmlzU3VwcG9ydExvY2FsU3RvcmFnZSgpID8gTG9jYWxTdG9yYWdlIDogQ29va2llOwoKdmFyIGdldEtleSA9IGZ1bmN0aW9uIGdldEtleShrZXkpIHsKICByZXR1cm4gIm10XyIuY29uY2F0KGtleSk7Cn07Cgp2YXIgU3RvcmFnZSA9IHsKICAvKioKICAgKiBTZXQgc3RvcmFnZSB2YWx1ZQogICAqIEBwYXJhbSBrZXkKICAgKiBAcGFyYW0gdmFsdWUKICAgKiBAcGFyYW0gZXhwaXJlU2Vjb25kcwogICAqLwogIHNldDogZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHsKICAgIHZhciBleHBpcmVTZWNvbmRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsOwogICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7CgogICAgaWYgKGV4cGlyZVNlY29uZHMpIHsKICAgICAgc3RvcmUuc2V0KGdldEtleShrZXkpLCB2YWx1ZSwgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBleHBpcmVTZWNvbmRzICogMTAwMCk7CiAgICB9IGVsc2UgewogICAgICBzdG9yZS5zZXQoZ2V0S2V5KGtleSksIHZhbHVlKTsKICAgIH0KICB9LAoKICAvKioKICAgKiBHZXQgc3RvcmFnZSB2YWx1ZQogICAqIEBwYXJhbSBrZXkKICAgKiBAcGFyYW0gZGVmYXVsdFZhbAogICAqIEByZXR1cm4ge251bGx9CiAgICovCiAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7CiAgICB2YXIgZGVmYXVsdFZhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDsKICAgIHZhciB2YWx1ZSA9IHN0b3JlLmdldChnZXRLZXkoa2V5KSk7CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gZGVmYXVsdFZhbDsKICAgIH0KICB9LAoKICAvKioKICAgKiBSZW1vdmUgYnkga2V5CiAgICogQHBhcmFtIGtleQogICAqLwogIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGtleSkgewogICAgdmFyIGlzQWRkS2V5UHJlZml4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0cnVlOwoKICAgIGlmIChpc0FkZEtleVByZWZpeCkgewogICAgICBrZXkgPSBnZXRLZXkoa2V5KTsKICAgIH0KCiAgICBzdG9yZS5yZW1vdmUoa2V5KTsKICB9LAoKICAvKioKICAgKiBHZXQgZXhwaXJlIGR1cmF0aW9uIG9mIGRheXMKICAgKiBAcGFyYW0gZGF5cwogICAqIEByZXR1cm4ge251bWJlcn0gdGhlIGV4cGlyZSBzZWNvbmRzIG9mIGRheXMKICAgKi8KICBnZXREYXlEdXJhdGlvbjogZnVuY3Rpb24gZ2V0RGF5RHVyYXRpb24oZGF5cykgewogICAgdmFyIG9uZURheVNlY29uZHMgPSA2MCAqIDYwICogMjQ7CiAgICByZXR1cm4gZGF5cyAqIG9uZURheVNlY29uZHM7CiAgfSwKCiAgLyoqCiAgICogR2V0IGV4cGlyZSBkdXJhdGlvbiBvZiBtaW51dGVzCiAgICogQHBhcmFtIG1pbnV0ZQogICAqIEByZXR1cm4ge251bWJlcn0gdGhlIGV4cGlyZSBzZWNvbmRzIG9mIG1pbnV0ZXMKICAgKi8KICBnZXRNaW51dGVEdXJhdGlvbjogZnVuY3Rpb24gZ2V0TWludXRlRHVyYXRpb24obWludXRlKSB7CiAgICByZXR1cm4gbWludXRlICogNjA7CiAgfSwKCiAgLyoqCiAgICogVXNpbmcgYmFzZTY0IGVuY29kaW5nCiAgICogQHBhcmFtIGtleQogICAqIEBwYXJhbSByYXdWYWx1ZQogICAqIEBwYXJhbSBleHBpcmVTZWNvbmRzCiAgICogQHBhcmFtIG9sZFdheQogICAqLwogIHNldEVuY29kaW5nOiBmdW5jdGlvbiBzZXRFbmNvZGluZyhrZXksIHJhd1ZhbHVlKSB7CiAgICB2YXIgZXhwaXJlU2Vjb25kcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDsKICAgIHZhciBvbGRXYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgdmFyIHZhbHVlID0gcmF3VmFsdWU7CgogICAgaWYgKHJhd1ZhbHVlICYmIGlzT2JqZWN0KHJhd1ZhbHVlKSkgewogICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHJhd1ZhbHVlKTsKICAgIH0KCiAgICB0aGlzLnNldChrZXksIGJhc2U2NEVuY29kZSh2YWx1ZSwgb2xkV2F5KSwgZXhwaXJlU2Vjb25kcyk7CiAgfSwKCiAgLyoqCiAgICogR2V0IHZhbHVlIHVzaW5nIGJhc2U2NCBlbmNvZGluZwogICAqIEBwYXJhbSBrZXkKICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlCiAgICogQHBhcmFtIG9sZFdheQogICAqIEByZXR1cm4ge3t9fQogICAqLwogIGdldERlY29kaW5nOiBmdW5jdGlvbiBnZXREZWNvZGluZyhrZXkpIHsKICAgIHZhciBkZWZhdWx0VmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgdmFyIG9sZFdheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldChrZXkpOwoKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICJ1bmRlZmluZWQiIHx8IHZhbHVlID09PSBudWxsKSB7CiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7CiAgICB9CgogICAgcmV0dXJuIHBhcnNlVG9Kc29uKGJhc2U2NERlY29kZSh2YWx1ZSwgb2xkV2F5KSwgZGVmYXVsdFZhbHVlKTsKICB9LAoKICAvKioKICAgKiBIYXMgc3RvcmFnZSBieSBrZXkKICAgKiBAcGFyYW0ga2V5CiAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgKi8KICBoYXM6IGZ1bmN0aW9uIGhhcyhrZXkpIHsKICAgIGlmICh0eXBlb2Ygc3RvcmUuaGFzID09PSAidW5kZWZpbmVkIikgewogICAgICByZXR1cm4gdHlwZW9mIHRoaXMuZ2V0KGdldEtleShrZXkpKSAhPT0gInVuZGVmaW5lZCI7CiAgICB9CgogICAgcmV0dXJuIHN0b3JlLmdldChnZXRLZXkoa2V5KSk7CiAgfSwKCiAgLyoqCiAgICogQ2xlYXIgYWxsCiAgICovCiAgY2xlYXJBbGw6IGZ1bmN0aW9uIGNsZWFyQWxsKCkgewogICAgc3RvcmUuY2xlYXJBbGwoKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IFN0b3JhZ2U7"},{"version":3,"sources":["/home/dclz/vivexelt-admin/src/core/helpers/storage.js"],"names":["LocalStorage","Cookie","Browser","isObject","base64Decode","base64Encode","parseToJson","store","isSupportLocalStorage","getKey","key","Storage","set","value","expireSeconds","JSON","stringify","Date","getTime","get","defaultVal","parse","e","remove","isAddKeyPrefix","getDayDuration","days","oneDaySeconds","getMinuteDuration","minute","setEncoding","rawValue","oldWay","getDecoding","defaultValue","has","clearAll"],"mappings":"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","sourcesContent":["import LocalStorage from \"../helpers/localStorage\"\nimport Cookie from \"@/core/helpers/cookie\"\nimport Browser from \"@/core/helpers/browser\"\nimport { isObject } from '@/core/utils/type'\nimport { base64Decode, base64Encode } from '@/core/utils/hash'\nimport { parseToJson } from '@/core/utils/parse'\n\nconst store = Browser.isSupportLocalStorage() ? LocalStorage : Cookie;\nconst getKey = (key) => `mt_${key}`;\nconst Storage = {\n  /**\n   * Set storage value\n   * @param key\n   * @param value\n   * @param expireSeconds\n   */\n  set(key, value, expireSeconds = null) {\n    value = JSON.stringify(value);\n    if (expireSeconds) {\n      store.set(\n        getKey(key),\n        value,\n        new Date().getTime() + expireSeconds * 1000\n      );\n    } else {\n      store.set(getKey(key), value);\n    }\n  },\n\n  /**\n   * Get storage value\n   * @param key\n   * @param defaultVal\n   * @return {null}\n   */\n  get(key, defaultVal = null) {\n    const value = store.get(getKey(key));\n\n    try {\n      return JSON.parse(value);\n    } catch (e) {\n      return defaultVal;\n    }\n  },\n\n  /**\n   * Remove by key\n   * @param key\n   */\n  remove(key, isAddKeyPrefix = true) {\n    if (isAddKeyPrefix) {\n      key = getKey(key);\n    }\n\n    store.remove(key);\n  },\n  /**\n   * Get expire duration of days\n   * @param days\n   * @return {number} the expire seconds of days\n   */\n  getDayDuration(days) {\n    const oneDaySeconds = 60 * 60 * 24;\n\n    return days * oneDaySeconds;\n  },\n\n  /**\n   * Get expire duration of minutes\n   * @param minute\n   * @return {number} the expire seconds of minutes\n   */\n  getMinuteDuration(minute) {\n    return minute * 60;\n  },\n  /**\n   * Using base64 encoding\n   * @param key\n   * @param rawValue\n   * @param expireSeconds\n   * @param oldWay\n   */\n  setEncoding(key, rawValue, expireSeconds = null, oldWay = false) {\n    let value = rawValue;\n\n    if (rawValue && isObject(rawValue)) {\n      value = JSON.stringify(rawValue);\n    }\n\n    this.set(key, base64Encode(value, oldWay), expireSeconds);\n  },\n\n  /**\n   * Get value using base64 encoding\n   * @param key\n   * @param defaultValue\n   * @param oldWay\n   * @return {{}}\n   */\n  getDecoding(key, defaultValue = {}, oldWay = false) {\n    const value = this.get(key);\n\n    if (typeof value === \"undefined\" || value === null) {\n      return defaultValue;\n    }\n\n    return parseToJson(base64Decode(value, oldWay), defaultValue);\n  },\n\n  /**\n   * Has storage by key\n   * @param key\n   * @return {boolean}\n   */\n  has(key) {\n    if (typeof store.has === \"undefined\") {\n      return typeof this.get(getKey(key)) !== \"undefined\";\n    }\n\n    return store.get(getKey(key));\n  },\n\n  /**\n   * Clear all\n   */\n  clearAll() {\n    store.clearAll();\n  },\n};\n\nexport default Storage"]}]}