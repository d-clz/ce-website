{"remainingRequest":"/home/dclz/vivexelt-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dclz/vivexelt-admin/src/views/Jobs/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dclz/vivexelt-admin/src/views/Jobs/List.vue","mtime":1620325383198},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js","mtime":1620325525308},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/vue-loader/lib/index.js","mtime":1620325533304}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKaW1wb3J0IExpZ2h0VGFibGUgZnJvbSAnLi4vVGFibGVzL1JlZ3VsYXJUYWJsZXMvTGlnaHRUYWJsZScKaW1wb3J0IHsgSFRUUCB9IGZyb20gJ0AvY29yZS9odHRwLWNvbW1vbicKaW1wb3J0IGpvYlNlcnZpY2UgZnJvbSAnQC9hcGkvam9iU2VydmljZScKaW1wb3J0IGNvdW50cnlTZXJ2aWNlIGZyb20gJ0AvYXBpL2NvdW50cnlTZXJ2aWNlJwppbXBvcnQgcG9zdFNlcnZpY2UgZnJvbSAnQC9hcGkvcG9zdFNlcnZpY2UnCmltcG9ydCB7IFRhYmxlLCBUYWJsZUNvbHVtbiB9IGZyb20gJ2VsZW1lbnQtdWknCmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnCmltcG9ydCB7CiAgTWFwTWluaW11bURlZ3JlZSwKICBNYXBKb2JUeXBlLAogIE1hcEpvYlN0YXR1cywKICBKb2JTdGF0dXMsCiAgTWluaW11bURlZ3JlZSwKICBKb2JUeXBlLAp9IGZyb20gJy4vY29uc3RhbnQvY29uc3RhbnQnCmltcG9ydCB7IGpzb24gfSBmcm9tICdkMycKLy9pbXBvcnQgRHBteFNlbGVjdCBmcm9tICJAL2NvbXBvbmVudHMvRHBteFNlbGVjdCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgW1RhYmxlLm5hbWVdOiBUYWJsZSwKICAgIFtUYWJsZUNvbHVtbi5uYW1lXTogVGFibGVDb2x1bW4sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsdGVyOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBsaW1pdDogNTAsCiAgICAgICAgbWluX2RlZ3JlZTogdW5kZWZpbmVkLAogICAgICAgIGRlcGFydG1lbnRzOiBbXSwKICAgICAgICBmb3NlczogW10sCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQsCiAgICAgICAgY291bnRyaWVzX2NvZGU6IFtdLAogICAgICAgIHR5cGU6IHVuZGVmaW5lZCwKICAgICAgfSwKICAgICAgcGFnZTogMSwKICAgICAgam9iczogW10sCiAgICAgIGRlcGFydG1lbnRzOiBbXSwKICAgICAgZmllbGRPZlN0dWRpZXM6IFtdLAogICAgICBjb3VudHJpZXM6IFtdLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICB0b3RhbEpvYnM6IDAsCiAgICAgIG9wZW5pbmdKb2JzOiAwLAogICAgICBzb29uSm9iczogMCwKICAgICAgY2xvc2VkSm9iczogMCwKICAgICAgam9iU2VsZWN0ZWQ6IFtdLAogICAgICBjb25maXJtTW9kYWw6IHsKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBtZXNzYWdlOiAnJywKICAgICAgfSwKICAgICAgZGVsZXRlTW9kZTogJycsCiAgICAgIGVudGl0eUlkOiAwLAogICAgICB2aXNpYmxlQnVsa0FjdGlvbjogZmFsc2UsCiAgICAgIGZpcnN0VGltZTogdHJ1ZSwKICAgICAgcG9zdHM6IFtdLAogICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvcHVibGljL3NlbmQtaW1hZ2UvJywKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyAuLi5tYXBTdGF0ZSgicHJvZHVjdHMiLCB7CiAgICAvLyAgIGFsbDogc3RhdGUgPT4gc3RhdGUuYWxsCiAgICAvLyB9KSwKICAgIC8vIC4uLm1hcFN0YXRlKCJqb2JzIiwgewogICAgLy8gICBqb2JzOiBzdGF0ZSA9PiBzdGF0ZS5hbGwKICAgIC8vIH0pCiAgICBnZXRKb2JTdGF0dXMoKSB7CiAgICAgIHJldHVybiBKb2JTdGF0dXMubWFwKChzKSA9PiB7CiAgICAgICAgbGV0IG5hbWUgPSBNYXBKb2JTdGF0dXMoKS5nZXQocykgfHwgcwogICAgICAgIHJldHVybiB7IG5hbWU6IG5hbWUsIHZhbHVlOiBzIH0KICAgICAgfSkKICAgIH0sCiAgICBnZXRNaW5pbXVtRGVncmVlcygpIHsKICAgICAgcmV0dXJuIE1pbmltdW1EZWdyZWUubWFwKChzKSA9PiB7CiAgICAgICAgbGV0IG5hbWUgPSBNYXBNaW5pbXVtRGVncmVlKCkuZ2V0KHMpIHx8IHMKICAgICAgICByZXR1cm4geyBuYW1lOiBuYW1lLCB2YWx1ZTogcyB9CiAgICAgIH0pCiAgICB9LAogICAgZ2V0Sm9iVHlwZXMoKSB7CiAgICAgIHJldHVybiBKb2JUeXBlLm1hcCgocykgPT4gewogICAgICAgIGxldCBuYW1lID0gTWFwSm9iVHlwZSgpLmdldChzKSB8fCBzCiAgICAgICAgcmV0dXJuIHsgbmFtZTogbmFtZSwgdmFsdWU6IHMgfQogICAgICB9KQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGluaXQoKSB7CiAgICAgIHBvc3RTZXJ2aWNlLmdldEFsbFBvc3QodGhpcy5maWx0ZXIucGFnZSwgdGhpcy5maWx0ZXIubGltaXQpLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhkYXRhKQogICAgICAgIGlmICghZGF0YS5zdWNjZXNzKSByZXR1cm4KICAgICAgICB0aGlzLnBvc3RzID0gZGF0YS5wb3N0cwogICAgICAgIHRoaXMudG90YWxKb2JzID0gZGF0YS50b3RhbAogICAgICB9KQogICAgfSwKICAgIGFzeW5jIGZpbHRlckpvYnMoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQogICAgICBhd2FpdCB0aGlzLmdldEpvYldpdGhGaWx0ZXIoKQogICAgICBhd2FpdCB0aGlzLmNvdW50Sm9iKCkKICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgfSwKICAgIGRlYm91bmNlRmV0Y2hWaWRlb3M6IGRlYm91bmNlKAogICAgICBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5pbml0KCkKICAgICAgfSwKICAgICAgNTAwLAogICAgICB7CiAgICAgICAgbGVhZGluZzogdHJ1ZSwKICAgICAgICB0cmFpbGluZzogdHJ1ZSwKICAgICAgfQogICAgKSwKICAgIGNoYW5nZVBhZ2UodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbCkKICAgICAgdGhpcy5maWx0ZXIucGFnZSA9IHZhbAogICAgfSwKICAgIGJ1aWxkUGFyYW1zRm9yRmlsdGVyKCkgewogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIHBhZ2U6IHRoaXMuZmlsdGVyLnBhZ2UsCiAgICAgICAgbmFtZTogdGhpcy5maWx0ZXIubmFtZSwKICAgICAgICBsaW1pdDogdGhpcy5maWx0ZXIubGltaXQsCiAgICAgICAgZmllbGRzOiAnaWQsY291bnRyeV9jb2RlLGlkLGltYWdlX3VybCxpbmR1c3RyeSxtaW5fZGVncmVlLG5hbWUsb3Blbl9hdCxjbG9zZV9hdCx0eXBlJywKICAgICAgfQogICAgICBpZiAodGhpcy5maWx0ZXIuZm9zZXMgJiYgdGhpcy5maWx0ZXIuZm9zZXMubGVuZ3RoID4gMCkgewogICAgICAgIHBhcmFtcy5mb3NfaWRzID0gdGhpcy5idWlsZFBhcmFtc0ZvckFycmF5KHRoaXMuZmlsdGVyLmZvc2VzLCAnaWQnKQogICAgICB9CiAgICAgIGlmICh0aGlzLmZpbHRlci5kZXBhcnRtZW50cykgewogICAgICAgIHBhcmFtcy5kZXBhcnRtZW50X2lkcyA9IHRoaXMuYnVpbGRQYXJhbXNGb3JBcnJheSh0aGlzLmZpbHRlci5kZXBhcnRtZW50cywgJ2lkJykKICAgICAgfQogICAgICBpZiAodGhpcy5maWx0ZXIuY291bnRyaWVzX2NvZGUpIHsKICAgICAgICBwYXJhbXMuY291bnRyaWVzX2NvZGUgPSB0aGlzLmJ1aWxkUGFyYW1zRm9yQXJyYXkodGhpcy5maWx0ZXIuY291bnRyaWVzX2NvZGUsICdjb2RlJykKICAgICAgfQogICAgICBpZiAodGhpcy5maWx0ZXIuc3RhdHVzKSB7CiAgICAgICAgcGFyYW1zLnN0YXR1cyA9IHRoaXMuZmlsdGVyLnN0YXR1cy52YWx1ZQogICAgICB9CiAgICAgIGlmICh0aGlzLmZpbHRlci5taW5fZGVncmVlKSB7CiAgICAgICAgcGFyYW1zLm1pbl9kZWdyZWUgPSB0aGlzLmZpbHRlci5taW5fZGVncmVlLnZhbHVlCiAgICAgIH0KICAgICAgaWYgKHRoaXMuZmlsdGVyLnR5cGUpIHsKICAgICAgICBwYXJhbXMudHlwZSA9IHRoaXMuZmlsdGVyLnR5cGUudmFsdWUKICAgICAgfQoKICAgICAgcmV0dXJuIHBhcmFtcwogICAgfSwKICAgIGJ1aWxkUGFyYW1zRm9yQXJyYXkoYXJyYXksIGtleSkgewogICAgICBsZXQgcmVzID0gW10KICAgICAgYXJyYXkuZm9yRWFjaCgoZSkgPT4gewogICAgICAgIHJlcy5wdXNoKGVba2V5XSkKICAgICAgfSkKICAgICAgcmV0dXJuIHJlcy5qb2luKCcsJykKICAgIH0sCiAgICBhc3luYyBnZXRKb2JXaXRoRmlsdGVyKCkgewogICAgICBsZXQgam9iUmVzID0gYXdhaXQgam9iU2VydmljZS5nZXRKb2JzKHRoaXMuYnVpbGRQYXJhbXNGb3JGaWx0ZXIoKSkKICAgICAgaWYgKCFqb2JSZXMgfHwgIWpvYlJlcy5zdWNjZXNzKSB7CiAgICAgICAgLy8gdG9hc3QKICAgICAgfQogICAgICBpZiAoam9iUmVzLmpvYnMpIHsKICAgICAgICB0aGlzLmpvYnMgPSBqb2JSZXMuam9icwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0QWxsRm9zQW5kRGVwYXJ0bWVudCgpIHsKICAgICAgbGV0IHJlcyA9IGF3YWl0IGpvYlNlcnZpY2UuZ2V0Rm9zQW5kRGVwYXJ0bWVudCgpCiAgICAgIGlmICghcmVzIHx8ICFyZXMuc3VjY2VzcykgewogICAgICAgIC8vIHRvYXN0CiAgICAgIH0KICAgICAgaWYgKHJlcy5kZXBhcnRtZW50cykgewogICAgICAgIHRoaXMuZGVwYXJ0bWVudHMgPSByZXMuZGVwYXJ0bWVudHMKICAgICAgfQogICAgICBpZiAocmVzLmZpZWxkX29mX3N0dWRpZXMpIHsKICAgICAgICB0aGlzLmZpZWxkT2ZTdHVkaWVzID0gcmVzLmZpZWxkX29mX3N0dWRpZXMKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGNvdW50Sm9iKCkgewogICAgICBsZXQgcGFyYW1zID0gdGhpcy5idWlsZFBhcmFtc0ZvckZpbHRlcigpCiAgICAgIGlmICh0aGlzLmZpcnN0VGltZSkgewogICAgICAgIHBhcmFtcy53aXRoX3N0YXRpc3RpYyA9IHRydWUKICAgICAgICB0aGlzLmZpcnN0VGltZSA9IGZhbHNlCiAgICAgIH0KICAgICAgbGV0IHJlcyA9IGF3YWl0IGpvYlNlcnZpY2UuY291bnRKb2JzKHBhcmFtcykKICAgICAgaWYgKCFyZXMgfHwgIXJlcy5zdWNjZXNzKSB7CiAgICAgICAgLy8gdG9hc3QKICAgICAgfQogICAgICB0aGlzLnRvdGFsSm9icyA9IHJlcy5jb3VudCB8fCAwCiAgICAgIHRoaXMuc29vbkpvYnMgPSByZXMuY291bnRfc29vbiB8fCAwCiAgICAgIHRoaXMub3BlbmluZ0pvYnMgPSByZXMuY291bnRfYXZhaWxhYmxlIHx8IDAKICAgICAgdGhpcy5jbG9zZWRKb2JzID0gdGhpcy50b3RhbEpvYnMgLSB0aGlzLnNvb25Kb2JzIC0gdGhpcy5vcGVuaW5nSm9icwogICAgfSwKICAgIGFzeW5jIGdldEFsbENvdW50cmllcygpIHsKICAgICAgbGV0IHJlcyA9IGF3YWl0IGNvdW50cnlTZXJ2aWNlLmdldEFsbENvdW50cnkoKQogICAgICBpZiAoIXJlcyB8fCAhcmVzLmNvdW50cmllcykgewogICAgICAgIC8vIHRvYXN0CiAgICAgIH0KICAgICAgdGhpcy5jb3VudHJpZXMgPSByZXMuY291bnRyaWVzCiAgICB9LAogICAgc2VsZWN0aW9uQ2hhbmdlZChzZWxlY3Rpb24pIHsKICAgICAgdGhpcy5qb2JTZWxlY3RlZCA9IHNlbGVjdGlvbgogICAgfSwKCiAgICB0b2dnbGVDb25maXJtTW9kYWwoaXNNdWx0aXBsZSwgaWQpIHsKICAgICAgdGhpcy5kZWxldGVNb2RlID0gaXNNdWx0aXBsZSA9PT0gdHJ1ZSA/ICdtdWx0aXBsZScgOiAnc2luZ2xlJwogICAgICBpZiAoaWQpIHsKICAgICAgICB0aGlzLmVudGl0eUlkID0gaWQKICAgICAgfQogICAgICB0aGlzLmNvbmZpcm1Nb2RhbC5zaG93ID0gdHJ1ZQogICAgICBpZiAodGhpcy5kZWxldGVNb2RlID09PSAnc2luZ2xlJykgewogICAgICAgIHRoaXMuY29uZmlybU1vZGFsLm1lc3NhZ2UgPSBgRGVsZXRlIHRoaXMgam9iP2AKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgbGVuZ3RoID0gdGhpcy5qb2JTZWxlY3RlZC5sZW5ndGgKICAgICAgICBsZXQgdG90YWwgPSB0aGlzLnBvc3RzLmxlbmd0aAogICAgICAgIHRoaXMuY29uZmlybU1vZGFsLm1lc3NhZ2UgPSBgRGVsZXRlICR7bGVuZ3RofSBvdXQgb2YgJHt0b3RhbH0/YAogICAgICB9CiAgICB9LAogICAgY2xvc2VDb25maXJtTW9kYWwoKSB7CiAgICAgIHRoaXMuY29uZmlybU1vZGFsLnNob3cgPSBmYWxzZQogICAgICB0aGlzLmNvbmZpcm1Nb2RhbC5tZXNzYWdlID0gJycKICAgICAgdGhpcy5lbnRpdHlJZCA9IDAKICAgIH0sCgogICAgZ2V0Sm9iU3RhdHVzVHlwZShzdGFydCwgZW5kKSB7CiAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAKICAgICAgaWYgKHN0YXJ0IDw9IG5vdyAmJiBub3cgPCBlbmQpIHsKICAgICAgICByZXR1cm4gJ3N1Y2Nlc3MnCiAgICAgIH0gZWxzZSBpZiAobm93ID4gZW5kKSB7CiAgICAgICAgcmV0dXJuICd3YXJuaW5nJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnaW5mbycKICAgICAgfQogICAgfSwKICAgIGdldEpvYlN0YXR1c0Rpc3BsYXkoc3RhcnQsIGVuZCkgewogICAgICBsZXQgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwCiAgICAgIGlmIChzdGFydCA8PSBub3cgJiYgbm93IDwgZW5kKSB7CiAgICAgICAgcmV0dXJuICdPcGVuaW5nJwogICAgICB9IGVsc2UgaWYgKG5vdyA+IGVuZCkgewogICAgICAgIHJldHVybiAnQ2xvc2VkJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnU2NoZWR1bGluZycKICAgICAgfQogICAgfSwKICAgIGdldE1pbkRlZ3JlZURpc3BsYXkoZGVncmVlKSB7CiAgICAgIHJldHVybiBNYXBNaW5pbXVtRGVncmVlKCkuZ2V0KGRlZ3JlZSkgfHwgZGVncmVlCiAgICB9LAogICAgZ2V0Sm9iVHlwZURpc3BsYXkodHlwZSkgewogICAgICByZXR1cm4gTWFwSm9iVHlwZSgpLmdldCh0eXBlKSB8fCB0eXBlCiAgICB9LAogICAgZ2V0Sm9iVHlwZURpc3BsYXlDbGFzcyh0eXBlKSB7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgJ2dyYWR1YXRlZCc6CiAgICAgICAgICByZXR1cm4gJ3N1Y2Nlc3MnCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAnaW5mbycKICAgICAgfQogICAgICByZXR1cm4KICAgIH0sCiAgICBhc3luYyBkb0RlbGV0ZSgpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlCiAgICAgIGxldCByZXMgPSB7fQogICAgICBsZXQgaWRzID0gW10KICAgICAgaWYgKHRoaXMuZGVsZXRlTW9kZSA9PT0gJ3NpbmdsZScpIHsKICAgICAgICByZXMgPSBhd2FpdCBwb3N0U2VydmljZS5kZWxldGVQb3N0QnlJZCh0aGlzLmVudGl0eUlkKQogICAgICAgIGlmICghcmVzIHx8ICFyZXMuc3VjY2VzcyB8fCByZXMuZXJyb3JfbWVzc2FnZSkgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbScsCiAgICAgICAgICAgIGhvcml6b250YWxBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICAgIHR5cGU6ICdkYW5nZXInLAogICAgICAgICAgICBtZXNzYWdlOiByZXMuZXJyb3JfbWVzc2FnZSB8fCAnU29tZXRoaW5nIHdlbnQgd3JvbmcnLAogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbScsCiAgICAgICAgICAgIGhvcml6b250YWxBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogYERlbGV0ZSBqb2Igc3VjY2Vzc2Z1bGx5YCwKICAgICAgICAgIH0pCiAgICAgICAgICBhd2FpdCB0aGlzLmluaXQoKQogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgdGhpcy5jbG9zZUNvbmZpcm1Nb2RhbCgpCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuam9iU2VsZWN0ZWQuZm9yRWFjaCgoZSkgPT4gewogICAgICAgICAgcG9zdFNlcnZpY2UuZGVsZXRlUG9zdEJ5SWQoZS5pZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbScsCiAgICAgICAgICAgICAgICBob3Jpem9udGFsQWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgbWVzc2FnZTogYERlbGV0ZSBqb2Igc3VjY2Vzc2Z1bGx5YCwKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiAnYm90dG9tJywKICAgICAgICAgICAgICAgIGhvcml6b250YWxBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5lcnJvcl9tZXNzYWdlIHx8ICdTb21ldGhpbmcgd2VudCB3cm9uZycsCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9CgogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgIHRoaXMuY2xvc2VDb25maXJtTW9kYWwoKQogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKQogIH0sCiAgd2F0Y2g6IHsKICAgIGZpbHRlcjogewogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMuZGVib3VuY2VGZXRjaFZpZGVvcygpCiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICB9LAogICAgam9iU2VsZWN0ZWQ6IHsKICAgICAgaGFuZGxlcigpIHsKICAgICAgICBpZiAodGhpcy5qb2JTZWxlY3RlZCAmJiB0aGlzLmpvYlNlbGVjdGVkLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMudmlzaWJsZUJ1bGtBY3Rpb24gPSB0cnVlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudmlzaWJsZUJ1bGtBY3Rpb24gPSBmYWxzZQogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views/Jobs","sourcesContent":["<template>\n  <div>\n    <div v-if=\"isLoading\">\n      <base-header class=\"pb-6 pb-8 pt-5 pt-md-8 bg-gradient-success\"> </base-header>\n      <b-container fluid class=\"mt--7\">\n        <card>\n          <dpmx-cl type=\"bullet\"></dpmx-cl>\n        </card>\n      </b-container>\n    </div>\n\n    <base-header class=\"pb-6 pb-8 pt-5 pt-md-8 bg-gradient-success\" v-if=\"!isLoading\">\n      <b-row> </b-row>\n    </base-header>\n    <b-container fluid class=\"mt--7\" v-if=\"!isLoading\">\n      <b-row>\n        <b-col>\n          <b-card no-body>\n            <!-- Filter -->\n            <b-card-header class=\"border-0\">\n              <b-input-group class>\n                <div class=\"input-group-prepend\">\n                  <span class=\"input-group-text\">\n                    <i class=\"fas fa-search\"></i>\n                  </span>\n                </div>\n                <b-form-input placeholder=\"Search\" type=\"text\" v-model=\"filter.name\"></b-form-input>\n                <b-input-group-append>\n                  <b-button v-b-toggle.collapse-1 variant=\"info\" @click=\"debounceFetchVideos()\"\n                    >Search</b-button\n                  >\n                </b-input-group-append>\n              </b-input-group>\n              <b-collapse id=\"collapse-4\" v-model=\"visibleBulkAction\" class=\"mt-2\">\n                <span class=\"pr-15\">{{ jobSelected.length }} selected</span>\n                <b-dropdown id=\"dropdown-1\" variant=\"secondary\" text=\"Action\" class=\"m-md-2\">\n                  <b-dropdown-item @click=\"toggleConfirmModal(true)\">Delete</b-dropdown-item>\n                </b-dropdown>\n              </b-collapse>\n            </b-card-header>\n            <el-table\n              class=\"table-responsive table dpxm-table\"\n              header-row-class-name=\"thead-light\"\n              :data=\"posts\"\n              @selection-change=\"selectionChanged\"\n            >\n              <el-table-column type=\"selection\" width=\"90\"></el-table-column>\n              <el-table-column label=\"Title\" min-width=\"100px\" prop=\"name\">\n                <template v-slot=\"{ row }\">\n                  <router-link :to=\"`/post/${row.id}`\">\n                    <b-media no-body class=\"align-items-center\">\n                      <b-media-body>\n                        <span class=\"font-weight-600 name mb-0 text-sm\">\n                          {{ row.title }}\n                        </span>\n                      </b-media-body>\n                    </b-media>\n                  </router-link>\n                </template>\n              </el-table-column>\n\n              <el-table-column label=\"Image thumbnail\" prop=\"short_description\" min-width=\"300px\">\n                <template v-slot=\"{ row }\">\n                  <span class=\"font-16\">\n                    <img alt=\"Image placeholder\" width=\"50px\" :src=\"url + row.filename\" />\n                  </span>\n                </template>\n              </el-table-column>\n\n              <el-table-column label=\"Link video\" min-width=\"300px\">\n                <template v-slot=\"{ row }\">\n                  <span class=\"font-16\">\n                    <a :href=\"row.link_video\">Link video</a>\n                  </span>\n                </template>\n              </el-table-column>\n\n              <el-table-column label=\"Create At\" min-width=\"150px\" prop=\"status\">\n                <template v-slot=\"{ row }\">\n                  <span>{{ new Date(row.createAt).toISOString().split('T')[0] }}</span>\n                </template>\n              </el-table-column>\n\n              <el-table-column label=\"Action\" min-width=\"130px\">\n                <template v-slot=\"{ row }\">\n                  <base-button\n                    icon\n                    type=\"danger\"\n                    class=\"btn-sm\"\n                    @click=\"toggleConfirmModal(false, row.id)\"\n                    title=\"Delete\"\n                  >\n                    <i class=\"ni ni-fat-remove\"></i>\n                  </base-button>\n                </template>\n              </el-table-column>\n            </el-table>\n\n            <b-card-footer class=\"py-4 d-flex justify-content-end\">\n              <base-pagination\n                :per-page=\"filter.limit\"\n                :total=\"totalJobs\"\n                v-on:change=\"(val) => changePage(val)\"\n              ></base-pagination>\n            </b-card-footer>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n    <!--Confirm modal-->\n    <modal :show.sync=\"confirmModal.show\">\n      <h2>{{ this.confirmModal.message }}</h2>\n\n      <template slot=\"footer\">\n        <base-button type=\"link\" class=\"ml-auto\" @click=\"closeConfirmModal\">Close</base-button>\n        <base-button type=\"danger\" @click=\"doDelete\" :disabled=\"isLoading\">Delete</base-button>\n      </template>\n    </modal>\n  </div>\n</template>\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport LightTable from '../Tables/RegularTables/LightTable'\nimport { HTTP } from '@/core/http-common'\nimport jobService from '@/api/jobService'\nimport countryService from '@/api/countryService'\nimport postService from '@/api/postService'\nimport { Table, TableColumn } from 'element-ui'\nimport debounce from 'lodash/debounce'\nimport {\n  MapMinimumDegree,\n  MapJobType,\n  MapJobStatus,\n  JobStatus,\n  MinimumDegree,\n  JobType,\n} from './constant/constant'\nimport { json } from 'd3'\n//import DpmxSelect from \"@/components/DpmxSelect\";\n\nexport default {\n  components: {\n    [Table.name]: Table,\n    [TableColumn.name]: TableColumn,\n  },\n  data() {\n    return {\n      filter: {\n        page: 1,\n        name: '',\n        limit: 50,\n        min_degree: undefined,\n        departments: [],\n        foses: [],\n        status: undefined,\n        countries_code: [],\n        type: undefined,\n      },\n      page: 1,\n      jobs: [],\n      departments: [],\n      fieldOfStudies: [],\n      countries: [],\n      isLoading: false,\n      totalJobs: 0,\n      openingJobs: 0,\n      soonJobs: 0,\n      closedJobs: 0,\n      jobSelected: [],\n      confirmModal: {\n        show: false,\n        message: '',\n      },\n      deleteMode: '',\n      entityId: 0,\n      visibleBulkAction: false,\n      firstTime: true,\n      posts: [],\n      url: 'http://localhost:3000/public/send-image/',\n    }\n  },\n  computed: {\n    // ...mapState(\"products\", {\n    //   all: state => state.all\n    // }),\n    // ...mapState(\"jobs\", {\n    //   jobs: state => state.all\n    // })\n    getJobStatus() {\n      return JobStatus.map((s) => {\n        let name = MapJobStatus().get(s) || s\n        return { name: name, value: s }\n      })\n    },\n    getMinimumDegrees() {\n      return MinimumDegree.map((s) => {\n        let name = MapMinimumDegree().get(s) || s\n        return { name: name, value: s }\n      })\n    },\n    getJobTypes() {\n      return JobType.map((s) => {\n        let name = MapJobType().get(s) || s\n        return { name: name, value: s }\n      })\n    },\n  },\n  methods: {\n    async init() {\n      postService.getAllPost(this.filter.page, this.filter.limit).then((data) => {\n        console.log(data)\n        if (!data.success) return\n        this.posts = data.posts\n        this.totalJobs = data.total\n      })\n    },\n    async filterJobs() {\n      this.isLoading = true\n      await this.getJobWithFilter()\n      await this.countJob()\n      this.isLoading = false\n    },\n    debounceFetchVideos: debounce(\n      async function () {\n        this.init()\n      },\n      500,\n      {\n        leading: true,\n        trailing: true,\n      }\n    ),\n    changePage(val) {\n      console.log(val)\n      this.filter.page = val\n    },\n    buildParamsForFilter() {\n      let params = {\n        page: this.filter.page,\n        name: this.filter.name,\n        limit: this.filter.limit,\n        fields: 'id,country_code,id,image_url,industry,min_degree,name,open_at,close_at,type',\n      }\n      if (this.filter.foses && this.filter.foses.length > 0) {\n        params.fos_ids = this.buildParamsForArray(this.filter.foses, 'id')\n      }\n      if (this.filter.departments) {\n        params.department_ids = this.buildParamsForArray(this.filter.departments, 'id')\n      }\n      if (this.filter.countries_code) {\n        params.countries_code = this.buildParamsForArray(this.filter.countries_code, 'code')\n      }\n      if (this.filter.status) {\n        params.status = this.filter.status.value\n      }\n      if (this.filter.min_degree) {\n        params.min_degree = this.filter.min_degree.value\n      }\n      if (this.filter.type) {\n        params.type = this.filter.type.value\n      }\n\n      return params\n    },\n    buildParamsForArray(array, key) {\n      let res = []\n      array.forEach((e) => {\n        res.push(e[key])\n      })\n      return res.join(',')\n    },\n    async getJobWithFilter() {\n      let jobRes = await jobService.getJobs(this.buildParamsForFilter())\n      if (!jobRes || !jobRes.success) {\n        // toast\n      }\n      if (jobRes.jobs) {\n        this.jobs = jobRes.jobs\n      }\n    },\n    async getAllFosAndDepartment() {\n      let res = await jobService.getFosAndDepartment()\n      if (!res || !res.success) {\n        // toast\n      }\n      if (res.departments) {\n        this.departments = res.departments\n      }\n      if (res.field_of_studies) {\n        this.fieldOfStudies = res.field_of_studies\n      }\n    },\n    async countJob() {\n      let params = this.buildParamsForFilter()\n      if (this.firstTime) {\n        params.with_statistic = true\n        this.firstTime = false\n      }\n      let res = await jobService.countJobs(params)\n      if (!res || !res.success) {\n        // toast\n      }\n      this.totalJobs = res.count || 0\n      this.soonJobs = res.count_soon || 0\n      this.openingJobs = res.count_available || 0\n      this.closedJobs = this.totalJobs - this.soonJobs - this.openingJobs\n    },\n    async getAllCountries() {\n      let res = await countryService.getAllCountry()\n      if (!res || !res.countries) {\n        // toast\n      }\n      this.countries = res.countries\n    },\n    selectionChanged(selection) {\n      this.jobSelected = selection\n    },\n\n    toggleConfirmModal(isMultiple, id) {\n      this.deleteMode = isMultiple === true ? 'multiple' : 'single'\n      if (id) {\n        this.entityId = id\n      }\n      this.confirmModal.show = true\n      if (this.deleteMode === 'single') {\n        this.confirmModal.message = `Delete this job?`\n      } else {\n        let length = this.jobSelected.length\n        let total = this.posts.length\n        this.confirmModal.message = `Delete ${length} out of ${total}?`\n      }\n    },\n    closeConfirmModal() {\n      this.confirmModal.show = false\n      this.confirmModal.message = ''\n      this.entityId = 0\n    },\n\n    getJobStatusType(start, end) {\n      let now = new Date().getTime() / 1000\n      if (start <= now && now < end) {\n        return 'success'\n      } else if (now > end) {\n        return 'warning'\n      } else {\n        return 'info'\n      }\n    },\n    getJobStatusDisplay(start, end) {\n      let now = new Date().getTime() / 1000\n      if (start <= now && now < end) {\n        return 'Opening'\n      } else if (now > end) {\n        return 'Closed'\n      } else {\n        return 'Scheduling'\n      }\n    },\n    getMinDegreeDisplay(degree) {\n      return MapMinimumDegree().get(degree) || degree\n    },\n    getJobTypeDisplay(type) {\n      return MapJobType().get(type) || type\n    },\n    getJobTypeDisplayClass(type) {\n      switch (type) {\n        case 'graduated':\n          return 'success'\n        default:\n          return 'info'\n      }\n      return\n    },\n    async doDelete() {\n      this.isLoading = true\n      let res = {}\n      let ids = []\n      if (this.deleteMode === 'single') {\n        res = await postService.deletePostById(this.entityId)\n        if (!res || !res.success || res.error_message) {\n          this.$notify({\n            verticalAlign: 'bottom',\n            horizontalAlign: 'center',\n            type: 'danger',\n            message: res.error_message || 'Something went wrong',\n          })\n        } else {\n          this.$notify({\n            verticalAlign: 'bottom',\n            horizontalAlign: 'center',\n            type: 'success',\n            message: `Delete job successfully`,\n          })\n          await this.init()\n          this.isLoading = false\n          this.closeConfirmModal()\n        }\n      } else {\n        this.jobSelected.forEach((e) => {\n          postService.deletePostById(e.id).then((res) => {\n            if (res && res.success) {\n              this.$notify({\n                verticalAlign: 'bottom',\n                horizontalAlign: 'center',\n                type: 'success',\n                message: `Delete job successfully`,\n              })\n            } else {\n              this.$notify({\n                verticalAlign: 'bottom',\n                horizontalAlign: 'center',\n                type: 'danger',\n                message: res.error_message || 'Something went wrong',\n              })\n            }\n          })\n        })\n      }\n\n      this.isLoading = false\n      this.closeConfirmModal()\n    },\n  },\n  mounted() {\n    this.init()\n  },\n  watch: {\n    filter: {\n      handler(val) {\n        this.debounceFetchVideos()\n      },\n      deep: true,\n    },\n    jobSelected: {\n      handler() {\n        if (this.jobSelected && this.jobSelected.length > 0) {\n          this.visibleBulkAction = true\n        } else {\n          this.visibleBulkAction = false\n        }\n      },\n      deep: true,\n    },\n  },\n}\n</script>\n"]}]}