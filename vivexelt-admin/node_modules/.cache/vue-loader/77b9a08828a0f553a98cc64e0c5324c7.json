{"remainingRequest":"/home/dclz/vivexelt-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dclz/vivexelt-admin/src/components/DpmxEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dclz/vivexelt-admin/src/components/DpmxEditor.vue","mtime":1620325383194},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js","mtime":1620325525308},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/vue-loader/lib/index.js","mtime":1620325533304}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBFZGl0b3IgZnJvbSAnQHRpbnltY2UvdGlueW1jZS12dWUnCmltcG9ydCBodHRwIGZyb20gJ0AvY29yZS9zZXJ2aWNlcy9odHRwJwpleHBvcnQgZGVmYXVsdCB7CiAgLy8gT1IgcmVnaXN0ZXIgbG9jYWxseQogIG5hbWU6ICdkcG14LWVkaXRvcicsCiAgY29tcG9uZW50czogewogICAgZWRpdG9yOiBFZGl0b3IsCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgZGVmYXVsdDogJycsCiAgICAgIHR5cGU6IFN0cmluZywKICAgIH0sCiAgICBoZWlnaHQ6IHsKICAgICAgZGVmYXVsdDogNTAwLAogICAgICB0eXBlOiBOdW1iZXIsCiAgICB9LAogICAgdG9vbGJhcjogQXJyYXksCiAgICBoYXNTZXR0aW5nQmFyOiB7CiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICB9LAogICAgaXNVcGxvYWRlZEltYWdlOiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB0eXBlOiBCb29sZWFuLAogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBlZGl0b3JDb25maWcoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcGx1Z2luczogW0Vzc2VudGlhbHMsIFBhcmFncmFwaCwgQm9sZCwgSXRhbGljXSwKICAgICAgICB0b29sYmFyOiBbJ2JvbGQnLCAnaXRhbGljJ10sCiAgICAgIH0KICAgIH0sCiAgICB0aW55TUNFS2V5KCkgewogICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuVlVFX0FQUF9USU5ZTUNFX0tFWQogICAgfSwKICAgIHRpbnlNQ0VPcHRpb25zKCkgewogICAgICBjb25zdCBjb25maWdPcHRpb25zID0gewogICAgICAgIHNlbGVjdG9yOiAndGV4dGFyZWEjdGlueS1lZGl0b3InLAogICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsCiAgICAgICAgbWVudWJhcjogZmFsc2UsCiAgICAgICAgc3RhdHVzYmFyOiBmYWxzZSwKICAgICAgICBwbHVnaW5zOgogICAgICAgICAgJ2F1dG9yZXNpemUgcHJpbnQgcHJldmlldyBpbXBvcnRjc3Mgc2VhcmNocmVwbGFjZSBhdXRvbGluayBhdXRvc2F2ZSBzYXZlIGRpcmVjdGlvbmFsaXR5IHZpc3VhbGJsb2NrcyBcCiAgICAgICAgICB2aXN1YWxjaGFycyBmdWxsc2NyZWVuIGltYWdlIGxpbmsgbWVkaWEgY29kZSB0YWJsZSBjaGFybWFwIGhyIHBhZ2VicmVhayBub25icmVha2luZyBhbmNob3IgdG9jIFwKICAgICAgICAgIGluc2VydGRhdGV0aW1lIGFkdmxpc3QgbGlzdHMgd29yZGNvdW50IGltYWdldG9vbHMgdGV4dHBhdHRlcm4gbm9uZWRpdGFibGUgaGVscCBjaGFybWFwIHF1aWNrYmFycyBlbW90aWNvbnMgcGFzdGUgcHJldmlldycsCgogICAgICAgIGJyYW5kaW5nOiBmYWxzZSwKICAgICAgICB0b29sYmFyOiBbCiAgICAgICAgICAgICAgJ2JvbGQgaXRhbGljIHVuZGVybGluZSBzdHJpa2V0aHJvdWdoIHwgYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgYWxpZ25qdXN0aWZ5IHwgaW1hZ2UgbWVkaWEgbGluayBhbmNob3InLAogICAgICAgICAgICAgICdjb2RlIG91dGRlbnQgaW5kZW50IGJsb2NrcXVvdGUgfCBudW1saXN0IGJ1bGxpc3QgY2hlY2tsaXN0IHxmb3JlY29sb3IgYmFja2NvbG9yIGZvcm1hdHBhaW50ZXIgcmVtb3ZlZm9ybWF0IHBhZ2VicmVhayB8IHRhYmxlJywKICAgICAgICAgICAgICAnc2VhcmNocmVwbGFjZSAgcHJldmlldyBmdWxsc2NyZWVuIHdvcmRjb3VudCcsCiAgICAgICAgICAgICAgJ2ZvbnRzZWxlY3QgZm9udHNpemVzZWxlY3QgZm9ybWF0c2VsZWN0IHwnLAogICAgICAgICAgICBdLAogICAgICAgIGV4dGVuZGVkX3ZhbGlkX2VsZW1lbnRzOgogICAgICAgICAgJ3N2Z1sqXSxkZWZzWypdLHBhdHRlcm5bKl0sZGVzY1sqXSxtZXRhZGF0YVsqXSxnWypdLG1hc2tbKl0scGF0aFsqXSxsaW5lWypdLG1hcmtlclsqXSxyZWN0WypdLGNpcmNsZVsqXSxlbGxpcHNlWypdLHBvbHlnb25bKl0scG9seWxpbmVbKl0sbGluZWFyR3JhZGllbnRbKl0scmFkaWFsR3JhZGllbnRbKl0sc3RvcFsqXSxpbWFnZVsqXSx2aWV3WypdLHRleHRbKl0sdGV4dFBhdGhbKl0sdGl0bGVbKl0sdHNwYW5bKl0sZ2x5cGhbKl0sc3ltYm9sWypdLHN3aXRjaFsqXSx1c2VbKl0nLAoKICAgICAgICAvL3F1aWNrYmFyc19pbnNlcnRfdG9vbGJhcjogJ3F1aWNrdGFibGUnLAogICAgICAgIHRvb2xiYXJfc3RpY2t5OiB0cnVlLAogICAgICAgIGF1dG9yZXNpemVfb25faW5pdDogZmFsc2UsCiAgICAgICAgaW5pdF9pbnN0YW5jZV9jYWxsYmFjazogZnVuY3Rpb24gKGVkaXRvcikgewogICAgICAgICAgZWRpdG9yLm9uKCdPcGVuV2luZG93JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgZWxEaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0b3gtc2lsdmVyLXNpbmsnKVswXQoKICAgICAgICAgICAgZWxEaWFsb2cuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJwogICAgICAgICAgICBlbERpYWxvZy5zdHlsZS5vcGFjaXR5ID0gMQogICAgICAgICAgfSkKCiAgICAgICAgICBlZGl0b3Iub24oJ0Nsb3NlV2luZG93JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgZWxEaWFsb2cgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0b3gtc2lsdmVyLXNpbmsnKVswXQogICAgICAgICAgICBlbERpYWxvZy5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJykKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndG94LWVkaXRvci1oZWFkZXInKVswXS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJykKICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBtaW5faGVpZ2h0OiA1MDAsCiAgICAgICAgLy9jb250ZW50X3N0eWxlOiAnJywKICAgICAgfQogICAgICBjb25maWdPcHRpb25zLmltYWdlc191cGxvYWRfaGFuZGxlciA9IHRoaXMuaW1hZ2VVcGxvYWQuYmluZCh0aGlzKQogICAgICByZXR1cm4gY29uZmlnT3B0aW9ucwogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlZGl0b3JEYXRhOiAnJywKICAgICAgaXNVcGRhdGVkTmV3VUk6IGZhbHNlLAogICAgICAvLyAuLi4KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG9uSW5wdXQodmFsKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsKQogICAgfSwKICAgIGFzeW5jIGltYWdlVXBsb2FkKGJsb2JJbmZvLCBzdWNjZXNzLCBmYWlsdXJlKSB7CiAgICAgIHRoaXMuaXNEaXNhYmxlQnV0dG9uID0gdHJ1ZQogICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBibG9iSW5mby5ibG9iKCksIGJsb2JJbmZvLmZpbGVuYW1lKCkpCiAgICAgIGNvbnN0IHVybCA9IGAvaW1hZ2VzLmpzb25gCiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaHR0cC5wb3N0KHVybCwgZm9ybURhdGEpCiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgc3VjY2VzcyhyZXNwb25zZS5pbWFnZS5zcmMpCiAgICAgICAgdGhpcy5pc0Rpc2FibGVCdXR0b24gPSBmYWxzZQogICAgICAgIHJldHVybgogICAgICB9CgogICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHsKICAgICAgICBmYWlsdXJlKHRoaXMuJHQoJ2NvbW1vbi5kZXNjcmlwdGlvbi50aGVfaW1hZ2VfdXBsb2FkX2lzX3Rvb19sYXJnZScpKQogICAgICB9CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHt9LAp9Cg=="},{"version":3,"sources":["DpmxEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DpmxEditor.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <editor\n    :api-key=\"tinyMCEKey\"\n    :value=\"value\"\n    @input=\"onInput\"\n    :init=\"tinyMCEOptions\"\n    :plugins=\"tinyMCEOptions.plugins\"\n    class=\"height500\"\n  ></editor>\n</template>\n\n<script>\nimport Editor from '@tinymce/tinymce-vue'\nimport http from '@/core/services/http'\nexport default {\n  // OR register locally\n  name: 'dpmx-editor',\n  components: {\n    editor: Editor,\n  },\n  props: {\n    value: {\n      default: '',\n      type: String,\n    },\n    height: {\n      default: 500,\n      type: Number,\n    },\n    toolbar: Array,\n    hasSettingBar: {\n      default: true,\n      type: Boolean,\n    },\n    isUploadedImage: {\n      default: false,\n      type: Boolean,\n    },\n  },\n  computed: {\n    editorConfig() {\n      return {\n        plugins: [Essentials, Paragraph, Bold, Italic],\n        toolbar: ['bold', 'italic'],\n      }\n    },\n    tinyMCEKey() {\n      return process.env.VUE_APP_TINYMCE_KEY\n    },\n    tinyMCEOptions() {\n      const configOptions = {\n        selector: 'textarea#tiny-editor',\n        height: this.height,\n        menubar: false,\n        statusbar: false,\n        plugins:\n          'autoresize print preview importcss searchreplace autolink autosave save directionality visualblocks \\\n          visualchars fullscreen image link media code table charmap hr pagebreak nonbreaking anchor toc \\\n          insertdatetime advlist lists wordcount imagetools textpattern noneditable help charmap quickbars emoticons paste preview',\n\n        branding: false,\n        toolbar: [\n              'bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | image media link anchor',\n              'code outdent indent blockquote | numlist bullist checklist |forecolor backcolor formatpainter removeformat pagebreak | table',\n              'searchreplace  preview fullscreen wordcount',\n              'fontselect fontsizeselect formatselect |',\n            ],\n        extended_valid_elements:\n          'svg[*],defs[*],pattern[*],desc[*],metadata[*],g[*],mask[*],path[*],line[*],marker[*],rect[*],circle[*],ellipse[*],polygon[*],polyline[*],linearGradient[*],radialGradient[*],stop[*],image[*],view[*],text[*],textPath[*],title[*],tspan[*],glyph[*],symbol[*],switch[*],use[*]',\n\n        //quickbars_insert_toolbar: 'quicktable',\n        toolbar_sticky: true,\n        autoresize_on_init: false,\n        init_instance_callback: function (editor) {\n          editor.on('OpenWindow', function () {\n            let elDialog = document.getElementsByClassName('tox-silver-sink')[0]\n\n            elDialog.style.visibility = 'visible'\n            elDialog.style.opacity = 1\n          })\n\n          editor.on('CloseWindow', function () {\n            let elDialog = document.getElementsByClassName('tox-silver-sink')[0]\n            elDialog.removeAttribute('style')\n            document.getElementsByClassName('tox-editor-header')[0].removeAttribute('style')\n          })\n        },\n        min_height: 500,\n        //content_style: '',\n      }\n      configOptions.images_upload_handler = this.imageUpload.bind(this)\n      return configOptions\n    },\n  },\n  data() {\n    return {\n      editorData: '',\n      isUpdatedNewUI: false,\n      // ...\n    }\n  },\n  methods: {\n    onInput(val) {\n      this.$emit('input', val)\n    },\n    async imageUpload(blobInfo, success, failure) {\n      this.isDisableButton = true\n      let formData = new FormData()\n      formData.append('file', blobInfo.blob(), blobInfo.filename())\n      const url = `/images.json`\n      const response = await http.post(url, formData)\n      if (response && response.success) {\n        success(response.image.src)\n        this.isDisableButton = false\n        return\n      }\n\n      if (response.error) {\n        failure(this.$t('common.description.the_image_upload_is_too_large'))\n      }\n    },\n  },\n  mounted() {},\n}\n</script>\n<style>\n.mceEditor td.mceIframeContainer iframe {\n    min-height: 350px !important;\n}\n.mceEditor table {\n    height: auto !important;\n}\n</style>\n"]}]}