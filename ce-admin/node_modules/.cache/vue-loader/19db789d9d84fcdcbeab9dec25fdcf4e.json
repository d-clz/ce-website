{"remainingRequest":"/home/dclz/vivexelt-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dclz/vivexelt-admin/src/views/Jobs/component/JobDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dclz/vivexelt-admin/src/views/Jobs/component/JobDetail.vue","mtime":1620325383198},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js","mtime":1620325525308},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/vue-loader/lib/index.js","mtime":1620325533304}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmbGF0UGlja2VyIGZyb20gJ3Z1ZS1mbGF0cGlja3ItY29tcG9uZW50JwppbXBvcnQgJ2ZsYXRwaWNrci9kaXN0L2ZsYXRwaWNrci5jc3MnCmltcG9ydCAnZmxhdHBpY2tyL2Rpc3QvdGhlbWVzL21hdGVyaWFsX2dyZWVuLmNzcycKaW1wb3J0IHsgTWFwTWluaW11bURlZ3JlZSwgTWFwSm9iVHlwZSwgTWluaW11bURlZ3JlZSwgSm9iVHlwZSB9IGZyb20gJy4uL2NvbnN0YW50L2NvbnN0YW50JwppbXBvcnQgcG9zdFNlcnZpY2UgZnJvbSAnQC9hcGkvcG9zdFNlcnZpY2UnCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBmbGF0UGlja2VyIH0sCiAgbmFtZTogJ2pvYi1kZXRhaWwnLAogIHByb3BzOiB7CiAgICBwb3N0OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICBzaG9ydF9kZXNjcmlwdGlvbjogJycsCiAgICAgICAgICBsaW5rX3ZpZGVvOiAnJywKICAgICAgICAgIGltYWdlX3RodW1ibmFpbDogJycsCiAgICAgICAgICBzZW9UaXRsZTogJycsCiAgICAgICAgICBpbWdGaWxlOiBudWxsLAogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8gY3JlYXRlIC8gZWRpdAogICAgfSwKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnY3JlYXRlJywKICAgIH0sCiAgICBzdWJtaXR0aW5nOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRlUGlja2VyQ29uZmlnOiB7CiAgICAgICAgYWxsb3dJbnB1dDogdHJ1ZSwKICAgICAgICBtb2RlOiAnc2luZ2xlJywKICAgICAgICBlbmFibGVUaW1lOiB0cnVlLAogICAgICB9LAogICAgICBjb3VudHJpZXM6IFtdLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBmaWxlOiAnJywKICAgICAgaW1nRmlsZTogbnVsbCwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB0aXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gJ2NyZWF0ZScgPyAnQ3JlYXRlIFZpZGVvJyA6ICdVcGRhdGUgVmlkZW8nCiAgICB9LAogICAgZ2V0TWluaW11bURlZ3JlZXMoKSB7CiAgICAgIHJldHVybiBNaW5pbXVtRGVncmVlLm1hcCgocykgPT4gewogICAgICAgIGxldCBuYW1lID0gTWFwTWluaW11bURlZ3JlZSgpLmdldChzKSB8fCBzCiAgICAgICAgcmV0dXJuIHsgbmFtZTogbmFtZSwgdmFsdWU6IHMgfQogICAgICB9KQogICAgfSwKICAgIGdldEpvYlR5cGVzKCkgewogICAgICByZXR1cm4gSm9iVHlwZS5tYXAoKHMpID0+IHsKICAgICAgICBsZXQgbmFtZSA9IE1hcEpvYlR5cGUoKS5nZXQocykgfHwgcwogICAgICAgIHJldHVybiB7IG5hbWU6IG5hbWUsIHZhbHVlOiBzIH0KICAgICAgfSkKICAgIH0sCiAgICBvcGVuQXRDb25maWd1cmF0aW9uKCkgewogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kYXRlUGlja2VyQ29uZmlnLCB7CiAgICAgICAgbWluRGF0ZTogJ3RvZGF5JywKICAgICAgICBvbkNoYW5nZTogdGhpcy5vbk9wZW5BdE9uQ2hhbmdlKHNlbGVjdGVkRGF0ZXMsIGRhdGVTdHIsIGluc3RhbmNlKSwKICAgICAgfSkKICAgIH0sCiAgICBjbG9zZUF0Q29uZmlndXJhdGlvbigpIHsKICAgICAgbGV0IG9wZW5BdCA9IG5ldyBEYXRlKHRoaXMuam9iLm9wZW5fYXQpCiAgICAgIGxldCBtaW5EYXRlID0gbmV3IERhdGUob3BlbkF0LnNldERhdGUob3BlbkF0LmdldERhdGUoKSArIDEpKQogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kYXRlUGlja2VyQ29uZmlnLCB7CiAgICAgICAgbWluRGF0ZTogbWluRGF0ZSwKICAgICAgICBkZWZhdWx0RGF0ZTogbWluRGF0ZSwKICAgICAgfSkKICAgIH0sCiAgICBidG5TdWJtaXRUaXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gJ2NyZWF0ZScgPyAnQ3JlYXRlJyA6ICdVcGRhdGUnCiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBpbml0KCkgewogICAgICAvLyBhd2FpdCB0aGlzLmdldEFsbENvdW50cmllcygpCiAgICB9LAogICAgYXN5bmMgb25TdWJtaXQoKSB7CiAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndml2ZXhlbHRfcGljJywgdGhpcy5pbWdGaWxlKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3RpdGxlJywgdGhpcy5wb3N0LnRpdGxlKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Nob3J0X2Rlc2NyaXB0aW9uJywgdGhpcy5wb3N0LnNob3J0X2Rlc2NyaXB0aW9uKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2xpbmtfdmlkZW8nLCB0aGlzLnBvc3QubGlua192aWRlbykKICAgICAgdGhpcy5wb3N0LnNlb1RpdGxlID0gdGhpcy5yZW1vdmVBY2NlbnRzKHRoaXMucG9zdC50aXRsZSkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzZW9UaXRsZScsIHRoaXMucG9zdC5zZW9UaXRsZSkKCiAgICAgIGlmICh0aGlzLnZhbGlkYXRlKCkgJiYgdGhpcy5tb2RlID09PSAnY3JlYXRlJykgewogICAgICAgIGxldCByZXMgPSBhd2FpdCBwb3N0U2VydmljZS5jcmVhdGVQb3N0KGZvcm1EYXRhKQogICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiAnYm90dG9tJywKICAgICAgICAgIGhvcml6b250YWxBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAnQ3JlYXRlIHN1Y2Nlc3MnLAogICAgICAgIH0pCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAndmlkZW9zJyB9KQogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGUoKSB7CiAgICAgIGxldCB2YWxpZCA9IHRydWUKICAgICAgaWYgKCF0aGlzLnBvc3QudGl0bGUgJiYgdGhpcy5wb3N0LnRpdGxlLmxlbmd0aCA8IDEpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbScsCiAgICAgICAgICBob3Jpem9udGFsQWxpZ246ICdjZW50ZXInLAogICAgICAgICAgdHlwZTogJ2RhbmdlcicsCiAgICAgICAgICBtZXNzYWdlOiAnVGl0bGUgaXMgaW52YWxpZCcsCiAgICAgICAgfSkKICAgICAgICB2YWxpZCA9IGZhbHNlCiAgICAgIH0KICAgICAgaWYgKAogICAgICAgICghdGhpcy5wb3N0LnNob3J0X2Rlc2NyaXB0aW9uICYmIHRoaXMucG9zdC5zaG9ydF9kZXNjcmlwdGlvbiA8IDEpIHx8CiAgICAgICAgdGhpcy5wb3N0LnNob3J0X2Rlc2NyaXB0aW9uLmxlbmd0aCA+IDUwMAogICAgICApIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbScsCiAgICAgICAgICBob3Jpem9udGFsQWxpZ246ICdjZW50ZXInLAogICAgICAgICAgdHlwZTogJ2RhbmdlcicsCiAgICAgICAgICBtZXNzYWdlOiAnU2hvcnQgRGVzY3JpcHRpb24gaXMgaW52YWxpZCcsCiAgICAgICAgfSkKICAgICAgICB2YWxpZCA9IGZhbHNlCiAgICAgIH0KICAgICAgaWYgKCF0aGlzLnBvc3QubGlua192aWRlbyAmJiB0aGlzLnBvc3QubGlua192aWRlbyA8IDEpIHsKICAgICAgICB0aGlzLiRub3RpZnkoewogICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbScsCiAgICAgICAgICBob3Jpem9udGFsQWxpZ246ICdjZW50ZXInLAogICAgICAgICAgdHlwZTogJ2RhbmdlcicsCiAgICAgICAgICBtZXNzYWdlOiAnTGluayB2aWRlbyBpcyBpbnZhbGlkJywKICAgICAgICB9KQogICAgICAgIHZhbGlkID0gZmFsc2UKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbGlkCiAgICB9LAogICAgZmlsZUNoYW5nZXMoZmlsZSkgewogICAgICB0aGlzLnBvc3QuaW1hZ2VfdGh1bWJuYWlsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKQogICAgICB0aGlzLiRlbWl0KCdpbWdDaGFuZ2UnLCBmaWxlKQogICAgfSwKCiAgICBoYW5kbGVGaWxlVXBsb2FkKCkgewogICAgICB0aGlzLmZpbGUgPSB0aGlzLiRyZWZzLmZpbGUuZmlsZXNbMF0KICAgIH0sCiAgICByZW1vdmVBY2NlbnRzKHN0cikgewogICAgICByZXR1cm4gc3RyCiAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJykKICAgICAgICAucmVwbGFjZSgvW1x1MDMwMC1cdTAzNmZdL2csICcnKQogICAgICAgIC5yZXBsYWNlKC/EkS9nLCAnZCcpCiAgICAgICAgLnJlcGxhY2UoL8SQL2csICdEJykKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["JobDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"JobDetail.vue","sourceRoot":"src/views/Jobs/component","sourcesContent":["<template>\n  <b-container fluid class=\"mt--6\">\n    <b-row>\n      <!-- Job Detail -->\n      <b-col xl=\"12\">\n        <card>\n          <b-row align-v=\"center\" slot=\"header\">\n            <b-col>\n              <h3 class=\"mb-0\">{{ title }}</h3>\n            </b-col>\n          </b-row>\n          <b-row>\n            <b-col lg=\"8\">\n              <b-form @submit.prevent=\"onSubmit\">\n                <div class=\"pl-lg-4\">\n                  <b-row>\n                    <b-col lg=\"12\">\n                      <b-row>\n                        <b-col>\n                          <base-input\n                            type=\"text\"\n                            label=\"Title\"\n                            placeholder=\"Title\"\n                            v-model=\"post.title\"\n                            name=\"Title\"\n                            ref=\"title\"\n                            :rules=\"{ required: true }\"\n                          >\n                          </base-input>\n                        </b-col>\n                      </b-row>\n                    </b-col>\n                  </b-row>\n                </div>\n                <div class=\"pl-lg-4\">\n                  <b-row>\n                    <b-col>\n                      <base-input\n                        type=\"text\"\n                        label=\"Link Video\"\n                        placeholder=\"Link Video\"\n                        v-model=\"post.link_video\"\n                        name=\"Link Video\"\n                        ref=\"Link Video\"\n                        :rules=\"{ required: true }\"\n                      >\n                      </base-input>\n                    </b-col>\n                  </b-row>\n                </div>\n                <div class=\"pl-lg-4\">\n                  <b-row>\n                    <b-col>\n                      <base-textarea\n                        type=\"text\"\n                        label=\"Short Description\"\n                        placeholder=\"Short Description\"\n                        v-model=\"post.short_description\"\n                        name=\"Short Description\"\n                        ref=\"short_description\"\n                        :rules=\"{ required: true, max: 500 }\"\n                      >\n                      </base-textarea>\n                    </b-col>\n                  </b-row>\n                </div>\n                <hr class=\"my-4\" />\n                <base-button\n                  type=\"primary\"\n                  :disabled=\"submitting\"\n                  :loading=\"submitting\"\n                  native-type=\"submit\"\n                  class=\"my-4\"\n                >\n                  {{ btnSubmitTitle }}\n                </base-button>\n              </b-form>\n            </b-col>\n            <b-col lg=\"4\">\n              <img :src=\"post.image_thumbnail\" width=\"100%\" />\n              <label class=\"form-control-label\">Link video</label>\n              <b-form-file\n                @input=\"fileChanges\"\n                v-model=\"imgFile\"\n                placeholder=\"Select file\"\n                drop-placeholder=\"Drop file here...\"\n                accept=\"image/jpeg, image/png\"\n                class=\"button\"\n                title=\"sadas\"\n              ></b-form-file>\n            </b-col>\n          </b-row>\n        </card>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n<script>\nimport flatPicker from 'vue-flatpickr-component'\nimport 'flatpickr/dist/flatpickr.css'\nimport 'flatpickr/dist/themes/material_green.css'\nimport { MapMinimumDegree, MapJobType, MinimumDegree, JobType } from '../constant/constant'\nimport postService from '@/api/postService'\n\nexport default {\n  components: { flatPicker },\n  name: 'job-detail',\n  props: {\n    post: {\n      type: Object,\n      default: () => {\n        return {\n          title: '',\n          short_description: '',\n          link_video: '',\n          image_thumbnail: '',\n          seoTitle: '',\n          imgFile: null,\n        }\n      },\n      // create / edit\n    },\n    mode: {\n      type: String,\n      default: 'create',\n    },\n    submitting: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      datePickerConfig: {\n        allowInput: true,\n        mode: 'single',\n        enableTime: true,\n      },\n      countries: [],\n      isLoading: false,\n      file: '',\n      imgFile: null,\n    }\n  },\n  computed: {\n    title() {\n      return this.mode === 'create' ? 'Create Video' : 'Update Video'\n    },\n    getMinimumDegrees() {\n      return MinimumDegree.map((s) => {\n        let name = MapMinimumDegree().get(s) || s\n        return { name: name, value: s }\n      })\n    },\n    getJobTypes() {\n      return JobType.map((s) => {\n        let name = MapJobType().get(s) || s\n        return { name: name, value: s }\n      })\n    },\n    openAtConfiguration() {\n      return Object.assign({}, this.datePickerConfig, {\n        minDate: 'today',\n        onChange: this.onOpenAtOnChange(selectedDates, dateStr, instance),\n      })\n    },\n    closeAtConfiguration() {\n      let openAt = new Date(this.job.open_at)\n      let minDate = new Date(openAt.setDate(openAt.getDate() + 1))\n      return Object.assign({}, this.datePickerConfig, {\n        minDate: minDate,\n        defaultDate: minDate,\n      })\n    },\n    btnSubmitTitle() {\n      return this.mode === 'create' ? 'Create' : 'Update'\n    },\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    async init() {\n      // await this.getAllCountries()\n    },\n    async onSubmit() {\n      let formData = new FormData()\n      formData.append('vivexelt_pic', this.imgFile)\n      formData.append('title', this.post.title)\n      formData.append('short_description', this.post.short_description)\n      formData.append('link_video', this.post.link_video)\n      this.post.seoTitle = this.removeAccents(this.post.title)\n      formData.append('seoTitle', this.post.seoTitle)\n\n      if (this.validate() && this.mode === 'create') {\n        let res = await postService.createPost(formData)\n        this.$notify({\n          verticalAlign: 'bottom',\n          horizontalAlign: 'center',\n          type: 'success',\n          message: 'Create success',\n        })\n        this.$router.push({ name: 'videos' })\n      }\n    },\n    validate() {\n      let valid = true\n      if (!this.post.title && this.post.title.length < 1) {\n        this.$notify({\n          verticalAlign: 'bottom',\n          horizontalAlign: 'center',\n          type: 'danger',\n          message: 'Title is invalid',\n        })\n        valid = false\n      }\n      if (\n        (!this.post.short_description && this.post.short_description < 1) ||\n        this.post.short_description.length > 500\n      ) {\n        this.$notify({\n          verticalAlign: 'bottom',\n          horizontalAlign: 'center',\n          type: 'danger',\n          message: 'Short Description is invalid',\n        })\n        valid = false\n      }\n      if (!this.post.link_video && this.post.link_video < 1) {\n        this.$notify({\n          verticalAlign: 'bottom',\n          horizontalAlign: 'center',\n          type: 'danger',\n          message: 'Link video is invalid',\n        })\n        valid = false\n      }\n\n      return valid\n    },\n    fileChanges(file) {\n      this.post.image_thumbnail = URL.createObjectURL(file)\n      this.$emit('imgChange', file)\n    },\n\n    handleFileUpload() {\n      this.file = this.$refs.file.files[0]\n    },\n    removeAccents(str) {\n      return str\n        .normalize('NFD')\n        .replace(/[\\u0300-\\u036f]/g, '')\n        .replace(/đ/g, 'd')\n        .replace(/Đ/g, 'D')\n    },\n  },\n}\n</script>\n<style></style>\n"]}]}