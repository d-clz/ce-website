{"remainingRequest":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js!/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/dclz/vivexelt-admin/src/core/helpers/cookie.js","dependencies":[{"path":"/home/dclz/vivexelt-admin/src/core/helpers/cookie.js","mtime":1620325383198},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js","mtime":1620325525308},{"path":"/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js","mtime":1620142637801}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL2RjbHovdml2ZXhlbHQtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczIvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5vYmplY3QuZW50cmllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20uaXRlcmFibGUiOwppbXBvcnQgQ29va2llSnMgZnJvbSAianMtY29va2llIjsKaW1wb3J0IHsgYnl0ZUxlbmd0aCB9IGZyb20gIi4vY29tbW9uIjsKaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gIi4uL3V0aWxzL29iamVjdCI7CmltcG9ydCBsb2cgZnJvbSAiLi4vaGVscGVycy9sb2ciOwppbXBvcnQgeyBERUZBVUxUX1NUT1JBR0VfTElGRV9USU1FLCBNQVhfQ09PS0lFX0JZVEVTIH0gZnJvbSAiLi4vY29uc3RhbnRzL3N0b3JhZ2UiOwp2YXIgQ29va2llID0gewogIC8qKgogICAqIFNldAogICAqIEBwYXJhbSBrZXkKICAgKiBAcGFyYW0gdmFsCiAgICogQHBhcmFtIGV4cGlyZXMKICAgKi8KICBzZXQ6IGZ1bmN0aW9uIHNldChrZXksIHZhbCkgewogICAgdmFyIGV4cGlyZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7CgogICAgaWYgKGJ5dGVMZW5ndGgodmFsKSA+IE1BWF9DT09LSUVfQllURVMpIHsKICAgICAgbG9nKCJDb29raWUgXCIiLmNvbmNhdChrZXksICJcIiBpcyB0b28gYmlnLiBCeXRlczogIikuY29uY2F0KGJ5dGVMZW5ndGgodmFsKSwgIiwgVmFsOiAiKS5jb25jYXQodmFsKSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgZHVyYXRpb247CgogICAgaWYgKGV4cGlyZXMpIHsKICAgICAgZHVyYXRpb24gPSBuZXcgRGF0ZShleHBpcmVzKTsKICAgIH0gZWxzZSB7CiAgICAgIGR1cmF0aW9uID0gREVGQVVMVF9TVE9SQUdFX0xJRkVfVElNRTsKICAgIH0KCiAgICBDb29raWVKcy5zZXQoa2V5LCB2YWwsIHsKICAgICAgZXhwaXJlczogZHVyYXRpb24KICAgIH0pOwogIH0sCgogIC8qKgogICAqIEdldAogICAqIEBwYXJhbSBrZXkKICAgKiBAcmV0dXJuIHsqfQogICAqLwogIGdldDogZnVuY3Rpb24gZ2V0KGtleSkgewogICAgcmV0dXJuIENvb2tpZUpzLmdldChrZXkpOwogIH0sCgogIC8qKgogICAqIEdldCBhbGwKICAgKiBAcGFyYW0gY2FsbGJhY2sKICAgKiBAcmV0dXJuIHtBcnJheX0KICAgKi8KICBlYWNoOiBmdW5jdGlvbiBlYWNoKGNhbGxiYWNrKSB7CiAgICB2YXIgdmFsdWVzID0gQ29va2llSnMuZ2V0KCk7CgogICAgaWYgKHZhbHVlcyAmJiAhaXNFbXB0eSh2YWx1ZXMpKSB7CiAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlcykuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHZhciBfaXRlbSA9IF9zbGljZWRUb0FycmF5KGl0ZW0sIDIpLAogICAgICAgICAgICBrZXkgPSBfaXRlbVswXSwKICAgICAgICAgICAgdmFsdWUgPSBfaXRlbVsxXTsKCiAgICAgICAgY2FsbGJhY2soa2V5LCB2YWx1ZSk7CiAgICAgIH0pOwogICAgfQogIH0sCgogIC8qKgogICAqIFJlbW92ZQogICAqIEBwYXJhbSBrZXkKICAgKi8KICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShrZXkpIHsKICAgIENvb2tpZUpzLnJlbW92ZShrZXkpOwogIH0sCgogIC8qKgogICAqIEhhcwogICAqIEBwYXJhbSBrZXkKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGhhczogZnVuY3Rpb24gaGFzKGtleSkgewogICAgcmV0dXJuIHR5cGVvZiBDb29raWUuZ2V0KGtleSkgIT09ICJ1bmRlZmluZWQiOwogIH0sCgogIC8qKgogICAqIENsZWFyIGFsbAogICAqLwogIGNsZWFyQWxsOiBmdW5jdGlvbiBjbGVhckFsbCgpIHsKICAgIENvb2tpZS5lYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgQ29va2llLnJlbW92ZShrZXkpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBDb29raWU7"},{"version":3,"sources":["/home/dclz/vivexelt-admin/src/core/helpers/cookie.js"],"names":["CookieJs","byteLength","isEmpty","log","DEFAULT_STORAGE_LIFE_TIME","MAX_COOKIE_BYTES","Cookie","set","key","val","expires","duration","Date","get","each","callback","values","Object","entries","forEach","item","value","remove","has","clearAll"],"mappings":";;;AAAA,OAAOA,QAAP,MAAqB,WAArB;AACA,SAASC,UAAT;AACA,SAASC,OAAT;AACA,OAAOC,GAAP;AACA,SACEC,yBADF,EAEEC,gBAFF;AAKA,IAAMC,MAAM,GAAG;AACb;;;;;;AAMAC,EAAAA,GAPa,eAOTC,GAPS,EAOJC,GAPI,EAOiB;AAAA,QAAhBC,OAAgB,uEAAN,IAAM;;AAC5B,QAAIT,UAAU,CAACQ,GAAD,CAAV,GAAkBJ,gBAAtB,EAAwC;AACtCF,MAAAA,GAAG,oBAAYK,GAAZ,mCAAuCP,UAAU,CAACQ,GAAD,CAAjD,oBAAgEA,GAAhE,EAAH;AACA;AACD;;AAED,QAAIE,QAAJ;;AAEA,QAAID,OAAJ,EAAa;AACXC,MAAAA,QAAQ,GAAG,IAAIC,IAAJ,CAASF,OAAT,CAAX;AACD,KAFD,MAEO;AACLC,MAAAA,QAAQ,GAAGP,yBAAX;AACD;;AAEDJ,IAAAA,QAAQ,CAACO,GAAT,CAAaC,GAAb,EAAkBC,GAAlB,EAAuB;AAAEC,MAAAA,OAAO,EAAEC;AAAX,KAAvB;AACD,GAtBY;;AAwBb;;;;;AAKAE,EAAAA,GA7Ba,eA6BTL,GA7BS,EA6BJ;AACP,WAAOR,QAAQ,CAACa,GAAT,CAAaL,GAAb,CAAP;AACD,GA/BY;;AAiCb;;;;;AAKAM,EAAAA,IAtCa,gBAsCRC,QAtCQ,EAsCE;AACb,QAAMC,MAAM,GAAGhB,QAAQ,CAACa,GAAT,EAAf;;AAEA,QAAIG,MAAM,IAAI,CAACd,OAAO,CAACc,MAAD,CAAtB,EAAgC;AAC9BC,MAAAA,MAAM,CAACC,OAAP,CAAeF,MAAf,EAAuBG,OAAvB,CAA+B,UAAAC,IAAI,EAAI;AAAA,mCAChBA,IADgB;AAAA,YAC9BZ,GAD8B;AAAA,YACzBa,KADyB;;AAErCN,QAAAA,QAAQ,CAACP,GAAD,EAAMa,KAAN,CAAR;AACD,OAHD;AAID;AACF,GA/CY;;AAiDb;;;;AAIAC,EAAAA,MArDa,kBAqDNd,GArDM,EAqDD;AACVR,IAAAA,QAAQ,CAACsB,MAAT,CAAgBd,GAAhB;AACD,GAvDY;;AAyDb;;;;;AAKAe,EAAAA,GA9Da,eA8DTf,GA9DS,EA8DJ;AACP,WAAO,OAAOF,MAAM,CAACO,GAAP,CAAWL,GAAX,CAAP,KAA2B,WAAlC;AACD,GAhEY;;AAkEb;;;AAGAgB,EAAAA,QArEa,sBAqEF;AACTlB,IAAAA,MAAM,CAACQ,IAAP,CAAY,UAAAN,GAAG,EAAI;AACjBF,MAAAA,MAAM,CAACgB,MAAP,CAAcd,GAAd;AACD,KAFD;AAGD;AAzEY,CAAf;AA4EA,eAAeF,MAAf","sourcesContent":["import CookieJs from \"js-cookie\";\nimport { byteLength } from \"./common\";\nimport { isEmpty } from \"../utils/object\";\nimport log from \"../helpers/log\";\nimport {\n  DEFAULT_STORAGE_LIFE_TIME,\n  MAX_COOKIE_BYTES\n} from \"../constants/storage\";\n\nconst Cookie = {\n  /**\n   * Set\n   * @param key\n   * @param val\n   * @param expires\n   */\n  set(key, val, expires = null) {\n    if (byteLength(val) > MAX_COOKIE_BYTES) {\n      log(`Cookie \"${key}\" is too big. Bytes: ${byteLength(val)}, Val: ${val}`);\n      return;\n    }\n\n    let duration;\n\n    if (expires) {\n      duration = new Date(expires);\n    } else {\n      duration = DEFAULT_STORAGE_LIFE_TIME;\n    }\n\n    CookieJs.set(key, val, { expires: duration });\n  },\n\n  /**\n   * Get\n   * @param key\n   * @return {*}\n   */\n  get(key) {\n    return CookieJs.get(key);\n  },\n\n  /**\n   * Get all\n   * @param callback\n   * @return {Array}\n   */\n  each(callback) {\n    const values = CookieJs.get();\n\n    if (values && !isEmpty(values)) {\n      Object.entries(values).forEach(item => {\n        const [key, value] = item;\n        callback(key, value);\n      });\n    }\n  },\n\n  /**\n   * Remove\n   * @param key\n   */\n  remove(key) {\n    CookieJs.remove(key);\n  },\n\n  /**\n   * Has\n   * @param key\n   * @return {boolean}\n   */\n  has(key) {\n    return typeof Cookie.get(key) !== \"undefined\";\n  },\n\n  /**\n   * Clear all\n   */\n  clearAll() {\n    Cookie.each(key => {\n      Cookie.remove(key);\n    });\n  }\n};\n\nexport default Cookie;\n"]}]}