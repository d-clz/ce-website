{"remainingRequest":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js!/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js??ref--13-0!/home/dclz/vivexelt-admin/src/routes/middleware/before-each.js","dependencies":[{"path":"/home/dclz/vivexelt-admin/src/routes/middleware/before-each.js","mtime":1620325383198},{"path":"/home/dclz/vivexelt-admin/node_modules/cache-loader/dist/cjs.js","mtime":1620142631738},{"path":"/home/dclz/vivexelt-admin/node_modules/babel-loader/lib/index.js","mtime":1620325525308},{"path":"/home/dclz/vivexelt-admin/node_modules/eslint-loader/index.js","mtime":1620142637801}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvZGNsei92aXZleGVsdC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgZ290b1NpZ25JbiB9IGZyb20gIi4uL2hlbHBlciI7CmltcG9ydCBBdXRoU2VydmljZSBmcm9tICIuLi8uLi9jb3JlL3NlcnZpY2VzL2F1dGgiOwoKdmFyIGJlZm9yZUVhY2ggPSBmdW5jdGlvbiBiZWZvcmVFYWNoKHJvdXRlciwgc3RvcmUpIHsKICByb3V0ZXIuYmVmb3JlRWFjaCgKICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgICAgdmFyIGF1dGhSZXF1aXJlZCwgY3VyVXJsOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYXV0aFJlcXVpcmVkID0gIXRvLm1ldGEubm9BdXRoUmVxdWlyZWQ7CiAgICAgICAgICAgICAgY3VyVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CgogICAgICAgICAgICAgIGlmICghKGF1dGhSZXF1aXJlZCAmJiAhQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZ290b1NpZ25JbigpKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpOwp9OwoKZXhwb3J0IGRlZmF1bHQgYmVmb3JlRWFjaDs="},{"version":3,"sources":["/home/dclz/vivexelt-admin/src/routes/middleware/before-each.js"],"names":["gotoSignIn","AuthService","beforeEach","router","store","to","from","next","authRequired","meta","noAuthRequired","curUrl","window","location","href","isAuthenticated"],"mappings":";;AAAA,SACIA,UADJ;AAGA,OAAOC,WAAP;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,MAAD,EAASC,KAAT,EAAmB;AAClCD,EAAAA,MAAM,CAACD,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAkB,iBAAOG,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACRC,cAAAA,YADQ,GACO,CAACH,EAAE,CAACI,IAAH,CAAQC,cADhB;AAERC,cAAAA,MAFQ,GAECC,MAAM,CAACC,QAAP,CAAgBC,IAFjB;;AAAA,oBAIVN,YAAY,IAAI,CAACP,WAAW,CAACc,eAAZ,EAJP;AAAA;AAAA;AAAA;;AAAA,+CAKHf,UAAU,EALP;;AAAA;AAAA,+CAcPO,IAAI,EAdG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAlB;;AAAA;AAAA;AAAA;AAAA;AAgBH,CAjBD;;AAoBA,eAAeL,UAAf","sourcesContent":["import {\n    gotoSignIn,\n} from '../helper'\nimport AuthService from '../../core/services/auth'\n\nconst beforeEach = (router, store) => {\n    router.beforeEach(async (to, from, next) => {\n        const authRequired = !to.meta.noAuthRequired\n        const curUrl = window.location.href\n\n        if (authRequired && !AuthService.isAuthenticated()) {\n            return gotoSignIn()\n        }\n\n        // // if valid domain\n        // if (authRequired) {\n        //     if (to.query && to.query.access_token) {\n        //         // return processAccessToken(router, to)\n        //     }\n        // }\n        return next()\n    })\n}\n\n\nexport default beforeEach"]}]}